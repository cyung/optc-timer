angular.module("app",["ui.router","ngMaterial","LocalStorageModule","md.data.table","pascalprecht.translate"]),function(){"use strict";function AdminCtrl(adminFactory,userFactory,navbarFactory){function activate(){navbarFactory.setSeo("Admin","Admin page for managing event dates."),adminFactory.getTurtleDates(function(err,globalDates,japanDates){return err?void console.log("err =",err):(self.globalDates=globalDates,void(self.japanDates=japanDates))})}var self=this;self.globalDates=[],self.japanDates=[],self.globalSelected=[],self.japanSelected=[],self.password=userFactory.getPassword(),activate(),self.addBoth=function(){self.addDate("global"),self.addDate("japan")},self.addDate=function(version){var date=self.turtleDate.toISOString().slice(0,10);adminFactory.addTurtleDate(date,version,function(err){return err?void console.log("err =",err):(console.log("Added turtle date"),void activate())})},self.removeSelectedDates=function(){var dates=self.globalSelected.map(function(date){return{turtleDate:date,version:"global"}}).concat(self.japanSelected.map(function(date){return{turtleDate:date,version:"japan"}}));adminFactory.removeTurtleDates(dates,function(err){return err?void console.log("err =",err):void activate()})},self.removePastDates=function(){function getPastDates(version){var oldDates="global"===version?self.globalDates.slice().reverse():self.japanDates.slice().reverse(),oldDates=oldDates.filter(function(date){return moment.utc(date).add(1,"days").isBefore(moment.utc())}).map(function(date){return{turtleDate:date,version:version}});return oldDates=oldDates.slice(0,5*Math.floor(oldDates.length/5))}var oldDates=getPastDates("global").concat(getPastDates("japan"));adminFactory.removeTurtleDates(oldDates,function(err){return err?void console.log("err =",err):(console.log("removed old dates"),void activate())})},self.addQuarter=function(){adminFactory.addQuarter(function(err){err&&console.log("err =",err),activate()})},self.updatePassword=function(){userFactory.setPassword(self.password)}}angular.module("app").controller("AdminCtrl",AdminCtrl),AdminCtrl.$inject=["adminFactory","userFactory","navbarFactory"]}(),function(){"use strict";function adminFactory($http,apiFactory,userFactory){function getTurtleDates(cb){$http.get(apiFactory.getBaseUrl()+"/api/turtle/date").then(function(response){for(var globalDates=[],japanDates=[],i=0;i<response.data.length;i++)"global"===response.data[i].version?globalDates.push(response.data[i].turtleDate):japanDates.push(response.data[i].turtleDate);cb(null,globalDates,japanDates)})["catch"](function(){cb("unable to get turtle dates")})}function addQuarter(cb){function addDateToArray(arr,turtleDate,version){arr.push({turtleDate:turtleDate,version:version})}for(var NUM_WEEKS=13,dates=[],start=moment.utc().startOf("isoWeek"),i=0;NUM_WEEKS>i;i++)addDateToArray(dates,start.format("YYYY-MM-DD"),"global"),addDateToArray(dates,start.format("YYYY-MM-DD"),"japan"),start.add("4","days"),addDateToArray(dates,start.format("YYYY-MM-DD"),"global"),addDateToArray(dates,start.format("YYYY-MM-DD"),"japan"),start.add("3","days");addTurtleDates(dates,cb)}function addTurtleDates(dates,cb){for(var runCount=0,i=0;i<dates.length;i++)addTurtleDate(dates[i].turtleDate,dates[i].version,function(err){err&&console.log("err =",err),++runCount===dates.length&&cb()})}function addTurtleDate(dateString,version,cb){var turtleDate=convertToUTC(dateString);$http.post(apiFactory.getBaseUrl()+"/api/turtle/date",{turtleDate:turtleDate,version:version,password:userFactory.getPassword()}).then(function(){cb(null)})["catch"](function(){cb("Unable to send message")})}function removeTurtleDates(dates,cb){dates=dates.map(function(date){return{turtleDate:convertToUTC(date.turtleDate),version:date.version,password:userFactory.getPassword()}}),console.log("dates =",dates);for(var runCount=0,i=0;i<dates.length;i++)removeTurtleDate(dates[i],function(err){err&&console.log("err =",err),++runCount===dates.length&&cb()})}function removeTurtleDate(turtleDate,cb){var params={params:turtleDate};$http["delete"](apiFactory.getBaseUrl()+"/api/turtle/date",params).then(function(){cb(null)})["catch"](function(){cb("Unable to delete "+params.turtleDate)})}function convertToUTC(dateString){return moment.utc(dateString).format("x")}var services={addTurtleDate:addTurtleDate,addTurtleDates:addTurtleDates,removeTurtleDates:removeTurtleDates,getTurtleDates:getTurtleDates,addQuarter:addQuarter};return services}angular.module("app").factory("adminFactory",adminFactory),adminFactory.$inject=["$http","apiFactory","userFactory"]}(),function(){"use strict";function barrelCtrl($mdMedia,userFactory,barrelFactory,navbarFactory){function setParams(){navbarFactory.setSeo("Barrel Breaking","Look up when to play the friend game with this up-to-date chart."),self.version=userFactory.getVersion(),self.barrelTimes=barrelFactory.getBarrelTimes(),self.format=userFactory.getDetailedHourStatus()}var self=this;setParams(),self.updateVersion=function(){userFactory.setVersion(self.version),self.barrelTimes=barrelFactory.getBarrelTimes()},self.isLargeScreen=function(){return $mdMedia("gt-md")},self.showHours=function(){userFactory.setDetailedHourStatus(self.format)}}angular.module("app").controller("BarrelCtrl",barrelCtrl),barrelCtrl.$inject=["$mdMedia","userFactory","barrelFactory","navbarFactory"]}(),function(){"use strict";function barrelFactory(userFactory){function getBarrelTimes(){function getTime(dayNum){var startOfDay=start.clone().add(dayNum,"days"),wood=[0,5,4,9,3,8,4,9,2,7,3,8,1,6,2,7,0,5,1,6],silver=[1,6,2,7,0,5,1,6,0,5,4,9,3,8,4,9,2,7,3,8],gold=[3,8,2,7,1,6,0,5,4,9],offset=dayNum+dayOfYear+4,index1=4*offset%20,index2=2*offset%10,woodDigits=wood.slice(index1,index1+4),silverDigits=silver.slice(index1,index1+4),goldDigits=gold.slice(index2,index2+2),date=startOfDay.format("YYYY-MM-DD");return{date:date,woodDigits:woodDigits,silverDigits:silverDigits,goldDigits:goldDigits,hourDisplay:hourDisplay}}for(var version=userFactory.getVersion(),NUM_DAYS=5,barrelTimes=[],data=getStartEndTimes(version),start=data.start,end=data.end,hourDisplay=start.clone().local().format("HH:mm")+"-"+end.clone().local().format("HH:mm"),dayOfYear=start.dayOfYear(),i=0;NUM_DAYS>i;i++)barrelTimes.push(getTime(i));return barrelTimes}function getStartEndTimes(version){var now=moment(),hourOffset="global"===version?12:6,start=moment.utc().startOf("day").add(hourOffset,"hours"),end=start.clone().add(23,"hours").add(59,"minutes");return now.isAfter(end)&&(start.add(1,"day"),end.add(1,"day")),{start:start,end:end}}var services={getBarrelTimes:getBarrelTimes};return services}angular.module("app").factory("barrelFactory",barrelFactory),barrelFactory.$inject=["userFactory"]}(),angular.module("app").config(function($translateProvider){$translateProvider.translations("en",{NAV_TURTLE:"Turtle Time",NAV_BARREL:"Barrel Breaking",NAV_EVENT:"Event",NAV_CONTACT:"Contact Me",NAV_SETTINGS:"Settings",TT_TITLE:"Turtle Time Calculator",TT_DIGIT:"6th digit of ID",TT_FORMAT:"Time Format",TT_STANDARD:"Standard",TT_MILITARY:"24hr format",TT_TIMEZONE:"Time Zone:",TT_SEEMORE:"See More",TT_ADD_CALENDAR:"Add to Calendar",TT_NOTIFICATION:"Chrome/Android Notifications",TT_HTML_NOTIFICATION:"HTML Notifications",TT_NOTIF_TEST:"Example Chrome/Android Notification",TT_HTML_NOTIF_TEST:"Example HTML Notification",TT_NOTIF_MINUTES:"Notification time in advance",TT_MINUTES:"Minutes",TT_NOTIF_SOUND:"Play sound",TT_NOTIF_EXAMPLE:"Example",BB_TITLE:"Barrel Breaking",BB_TIME:"Time till next rotation:",BB_ALT:"Show Hours",BB_DATE:"Date",BB_WOODEN:"Wooden",BB_SILVER:"Silver",BB_GOLD:"Gold"}).translations("de",{NAV_TURTLE:"Turtle Zeiten",NAV_BARREL:"Friend Game",NAV_EVENT:"Ereignis",NAV_CONTACT:"Kontaktiere Mich",NAV_SETTINGS:"Einstellungen",TT_TITLE:"Turtle Zeiten Rechner",TT_DIGIT:"6te Ziffer der ID",TT_FORMAT:"Zeitformat",TT_STANDARD:"Standard",TT_MILITARY:"24-Stunden",TT_TIMEZONE:"Zeitzone:",TT_SEEMORE:"siehe mehr",TT_ADD_CALENDAR:"Zum Kalender hinzufügen",TT_NOTIFICATION:"Chrome/Android Benachrichtigung",TT_HTML_NOTIFICATION:"HTML Benachrichtigung",TT_NOTIF_TEST:"Beispiel Chrome/Android Benachrichtigung",TT_HTML_NOTIF_TEST:"Beispiel HTML Benachrichtigung",TT_NOTIF_MINUTES:"HTML-Benachrichtigung",TT_MINUTES:"Minuten",TT_NOTIF_SOUND:"Ton abspielen",TT_NOTIF_EXAMPLE:"Beispiel",BB_TITLE:"Barrel Breaking",BB_TIME:"Zeit bis zum nächsten Wechsel:",BB_ALT:"Anzeige Stunden",BB_DATE:"Datum",BB_WOODEN:"Holz",BB_SILVER:"Silber",BB_GOLD:"Gold"}).translations("es",{NAV_TURTLE:"Horario Tortugas",NAV_BARREL:"Friend Game",NAV_EVENT:"Evento",NAV_CONTACT:"Contáctame",NAV_SETTINGS:"Configuración",TT_TITLE:"Horario Tortugas Calculadora",TT_DIGIT:"6th dígito de ID",TT_FORMAT:"formato de tiempo",TT_STANDARD:"estándar",TT_MILITARY:"24 horas",TT_TIMEZONE:"Zona Horaria:",TT_SEEMORE:"ver más",TT_ADD_CALENDAR:"Añadir al calendario",TT_NOTIFICATION:"Notificaciones de Chrome/Android",TT_HTML_NOTIFICATION:"Notificaciones de HTML",TT_NOTIF_TEST:"Test Chrome/Android Notification",TT_HTML_NOTIF_TEST:"Test HTML Notification",TT_NOTIF_MINUTES:"Minutos antes de evento",TT_MINUTES:"Minutos",TT_NOTIF_SOUND:"Reproducir sonido",TT_NOTIF_EXAMPLE:"Ejemplo",BB_TITLE:"Friend Game",BB_TIME:"Tiempo hasta la próxima rotación:",BB_ALT:"Mostrar las horas",BB_DATE:"Fecha",BB_WOODEN:"Madera",BB_SILVER:"Plata",BB_GOLD:"Oro"}).translations("fr",{NAV_TURTLE:"Horaires des Tortues",NAV_BARREL:"Partie d'amis",NAV_EVENT:"Event",NAV_CONTACT:"Me Contacter",NAV_SETTINGS:"Réglages",TT_TITLE:"Calculateur de l'Horaire des Tortues",TT_DIGIT:"6eme chiffre ID",TT_FORMAT:"format de l'heure",TT_STANDARD:"normale",TT_MILITARY:"24h",TT_TIMEZONE:"Fuseau Horaire:",TT_SEEMORE:"Lire la suite",TT_ADD_CALENDAR:"Ajouter au Calendrier",TT_NOTIFICATION:"Notifications Google/Android",TT_HTML_NOTIFICATION:"Notifications HTML",TT_NOTIF_TEST:"Test Chrome/Android Notification",TT_HTML_NOTIF_TEST:"Test HTML Notification",TT_NOTIF_MINUTES:"Temps Restant avant Event",TT_MINUTES:"Minutes",TT_NOTIF_SOUND:"Jouer le son",TT_NOTIF_EXAMPLE:"Exemple",BB_TITLE:"Éclatement du Tonneau",BB_TIME:"Temps jusqu'à la Prochaine Rotation:",BB_ALT:"Afficher les Heures",BB_DATE:"Date",BB_WOODEN:"Bois",BB_SILVER:"Argent",BB_GOLD:"Or"}),$translateProvider.preferredLanguage("en"),$translateProvider.useSanitizeValueStrategy("escaped")}),function(){"use strict";function contactCtrl($http,apiFactory,navbarFactory){var self=this,sending=!1;self.subjects=["Incorrect Turtle Time","Report a bug","Other"],self.message={},navbarFactory.setSeo("Contact Me","Find a bug? Have a question or feedback? Contact me and let me know."),self.isTurtleBug=function(){return void 0===self.message.subject?!1:"Incorrect Turtle Time"===self.message.subject},self.sendMessage=function(){sending||(sending=!0,self.status="Sending...",$http.post(apiFactory.getBaseUrl()+"/contact",self.message).then(function(){self.status="Sent!",sending=!1})["catch"](function(){self.status="Error sending. Please try again later.",sending=!1}))}}angular.module("app").controller("ContactCtrl",contactCtrl),contactCtrl.$inject=["$http","apiFactory","navbarFactory"]}(),function(){"use strict";function eventsCtrl($mdMedia,userFactory,eventsFactory,navbarFactory){function setParams(){navbarFactory.setSeo("Events","Event information and and up-to-date table on story isle bonuses."),self.version=userFactory.getVersion(),self.eventTimes=eventsFactory.getEventTimes(),self.format=userFactory.getDetailedHourStatus()}var self=this;setParams(),self.updateVersion=function(){userFactory.setVersion(self.version),self.eventTimes=eventsFactory.getEventTimes()},self.isLargeScreen=function(){return $mdMedia("gt-md")},self.showHours=function(){userFactory.setDetailedHourStatus(self.format)}}angular.module("app").controller("EventsCtrl",eventsCtrl),eventsCtrl.$inject=["$mdMedia","userFactory","eventsFactory","navbarFactory"]}(),function(){"use strict";function eventsFactory(userFactory){function getEventTimes(){function getTime(dayNum){var offset=dayNum+dayOfYear+4;offset%=7;var drop=dropTable[offset].split(","),stamina=staminaTable[offset].split(","),beli=beliTable[offset].split(","),startDate=start.clone().add(dayNum,"days"),hourOffset="global"===version?23:11,end=startDate.clone().add(hourOffset,"hours").add(59,"minutes"),date=startDate.format("YYYY-MM-DD"),hourString=startDate.format("HH:mm")+"-"+end.format("HH:mm");return{date:date,hourDisplay:hourString,drop:drop,stamina:stamina,beli:beli}}var version=userFactory.getVersion(),NUM_DAYS=5,dropTable=["Loguetown, Jaya","Arlong Park, Alubarna","Baratie, Nanohana Rainbase","Syrup Village, Drum Island, Water 7","Orange Town, Little Garden, Long Ring Long Land","Shell Town, Whiskey Peak, Ark Maxim","Alvida's Hideout, Twin Cape, Angel Island"],staminaTable=["Orange Town, Drum Island, Water 7","Shell Town, Little Garden, Long Ring Long Land","Alvida's Hideout, Whiskey Peak, Ark Maxim","Fuschia Village, Twin Cape, Angel Island","Loguetown, Jaya","Arlong Park, Alubarna","Baratie, Nanohana Rainbase"],beliTable=["Baratie, Whiskey Peak, Ark Maxim","Syrup Village, Twin Cape, Angel Island","Loguetown, Jaya","Arlong Park, Alubarna","Baratie, Nanohana Rainbase","Syrup Village, Drum Island, Water 7","Orange Town, Little Garden, Long Ring Long Land"];"japan"===version&&(dropTable=["Loguetown, Jaya, Thriller Bark 1","Arlong Park, Alubarna, Enies Lobby 2","Baratie, Nanohana Rainbase, Enies Lobby 1","Syrup Village, Drum Island, Water 7","Orange Town, Little Garden, Long Ring Long Land","Shell Town, Whiskey Peak, Ark Maxim","Alvida's Hideout, Twin Cape, Angel Island"],staminaTable=["Orange Town, Drum Island, Water 7","Shell Town, Little Garden, Long Ring Long Land","Alvida's Hideout, Whiskey Peak, Ark Maxim","Fuschia Village, Twin Cape, Angel Island","Loguetown, Jaya, Thriller Bark 1","Arlong Park, Alubarna, Enies Lobby 2","Baratie, Nanohana Rainbase, Enies Lobby 1"],beliTable=["Baratie, Whiskey Peak, Ark Maxim","Syrup Village, Twin Cape, Angel Island, Thriller Bark 2","Loguetown, Jaya, Thriller Bark 1","Arlong Park, Alubarna, Enies Lobby 2","Baratie, Nanohana Rainbase, Enies Lobby 1","Syrup Village, Drum Island, Water 7","Orange Town, Little Garden, Long Ring Long Land"]);for(var start=getStartTime(version),dayOfYear=start.dayOfYear(),eventTimes=[],i=0;NUM_DAYS>i;i++)eventTimes.push(getTime(i));return eventTimes}function getStartTime(version){var hourOffset="global"===version?8:2,start=moment.utc().startOf("day").add(hourOffset,"hours"),now=moment();return now.isAfter(start)&&start.subtract(1,"day"),start}var services={getEventTimes:getEventTimes};return services}angular.module("app").factory("eventsFactory",eventsFactory),eventsFactory.$inject=["userFactory"]}(),function(){"use strict";function apiFactory(){function getBaseUrl(){return"localhost"==document.location.hostname?"http://localhost:3000":"https://optctimer.com"}var services={getBaseUrl:getBaseUrl};return services}angular.module("app").factory("apiFactory",apiFactory),apiFactory.$inject=[]}(),function(){"use strict";function calendarFactory(userFactory){function getCalendar(){for(var begin,end,now=moment(),turtleTimes=userFactory.getTurtleTimes().filter(function(turtleTime){return now.isBefore(turtleTime)}),cal=ics(),subject="OPTC Turtle Time",description="One Piece Treasure Cruise Turtle Time",location="OPTC",i=0;4>i;i++)begin=turtleTimes[i].format(),end=turtleTimes[i].clone().add(30,"minutes").format(),cal.addEvent(subject,description,location,begin,end);cal.download("turtle_times",".ics")}var services={getCalendar:getCalendar};return services}angular.module("app").factory("calendarFactory",calendarFactory),calendarFactory.$inject=["userFactory"]}(),function(){"use strict";function htmlNotificationFactory(userFactory){function isEnabled(){var mobileAndTabletCheck=(/iPad|iPhone|iPod/.test(navigator.userAgent),function(){var check=!1;return function(a){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0)}(navigator.userAgent||navigator.vendor||window.opera),check});return"Notification"in window&&!mobileAndTabletCheck()?(Notification.requestPermission(),!0):!1}function setNotifications(){for(var timeUntil,turtleTimes=userFactory.getTurtleTimes(),soundEnabled=userFactory.getHtmlNotificationSoundStatus(),now=moment(),minutes=userFactory.getTimeBeforeNotification(),options={body:minutes+" minutes till Turtle Time!",icon:"favicon.ico"},end=moment().add(3,"days"),i=0;i<turtleTimes.length;i++)now.isAfter(turtleTimes[i])||turtleTimes[i].isAfter(end)||(timeUntil=turtleTimes[i].format("x")-now.format("x"),timeUntil-=1e3*minutes,0>timeUntil||isNaN(timeUntil)||(void 0!==notifications[i]&&clearTimeout(notifications[i]),notifications[i]=setTimeout(function(){new Notification("OPTC Turtle Time",options);soundEnabled&&sound.play()},timeUntil)))}function playExample(){var minutes=userFactory.getTimeBeforeNotification(),soundEnabled=userFactory.getHtmlNotificationSoundStatus(),options={body:minutes+" minutes till Turtle Time!",icon:"../images/flag.png"};new Notification("OPTC Turtle Time",options);soundEnabled&&sound.play()}var services={isEnabled:isEnabled,setNotifications:setNotifications,playExample:playExample},notifications=[],sound=new Audio("sounds/notification.mp3");return services}angular.module("app").factory("htmlNotificationFactory",htmlNotificationFactory),htmlNotificationFactory.$inject=["userFactory"]}(),function(){"use strict";function notificationFactory($http,userFactory,apiFactory){function isEnabled(){return"serviceWorker"in navigator}function attachWorker(){return new Promise(function(resolve,reject){isEnabled()?navigator.serviceWorker.register("service-worker.js").then(function(){return navigator.serviceWorker.ready}).then(function(serviceWorkerRegistration){reg=serviceWorkerRegistration,console.log("Service Worker is ready."),resolve()})["catch"](function(err){console.log("Service Worker Error."),reject(err)}):reject("service workers not supported")})}function subscribe(cb){function aux(){reg.pushManager.getSubscription().then(function(pushSubscription){return pushSubscription?(sub=pushSubscription,sendSubscriptionToServer(),cb(null)):void reg.pushManager.subscribe({userVisibleOnly:!0}).then(function(pushSubscription){sub=pushSubscription,console.log("endpoint =",sub.endpoint),console.log("Subscribed."),sendSubscriptionToServer(),cb(null)})["catch"](function(err){console.log("Unable to subscribe."),cb(err)})})}return isEnabled()?void(reg?aux():attachWorker().then(function(){aux()})["catch"](function(err){console.log(err)})):"notifications not enabled"}function unsubscribe(cb){return isEnabled()?void sub.unsubscribe().then(function(event){console.log("Unsubscribed.",event),cb(null)})["catch"](function(err){console.log("Error unsubscribing."),cb(err)}):"notifications not enabled"}function sendSubscriptionToServer(){var endpoint=sub.endpoint;if(endpoint.match(/^https:\/\/android\.googleapis\.com\/gcm\/send/)){var registrationId=endpoint.match(/(?:.*?)send\/(.*)$/)[1];endpoint="https://android.googleapis.com/gcm/send",userFactory.setRegistrationId(registrationId)}}function playExample(){var data={registrationIds:[userFactory.getRegistrationId()]};console.log("data =",data),$http.post(apiFactory.getBaseUrl()+"/api/gcm",data).then(function(){console.log("sent to server")})["catch"](function(){console.log("error posting to server")})}var reg,sub,services={isEnabled:isEnabled,subscribe:subscribe,unsubscribe:unsubscribe,playExample:playExample};return services}angular.module("app").factory("notificationFactory",notificationFactory),notificationFactory.$inject=["$http","userFactory","apiFactory"]}(),function(){"use strict";function timeFactory($http,userFactory,apiFactory){function getTurtleTimes(cb){var params={params:{digit:userFactory.getDigit(),timeFormat:userFactory.getTimeFormat(),version:userFactory.getVersion(),numOfDays:3}};$http.get(apiFactory.getBaseUrl()+"/api/turtle",params).then(function(response){userFactory.setTurtleTimes(response.data.map(function(time){return moment.utc(time)}));var turtleTimes=getFormattedTimes(response.data);cb(null,turtleTimes)})["catch"](function(err){cb(err)})}function getFormattedTimes(turtleTimes){var timeFormat=userFactory.getTimeFormat();return turtleTimes.map(function(timeStr){var time,date,turtleTime=moment.utc(timeStr);return"standard"===timeFormat?time=turtleTime.local().format("h:mm a"):"military"===timeFormat&&(time=turtleTime.local().format("HH:mm")),date=turtleTime.local().format("LL"),{time:time,date:date}})}var services={getTurtleTimes:getTurtleTimes};return services}angular.module("app").factory("timeFactory",timeFactory),timeFactory.$inject=["$http","userFactory","apiFactory"]}(),function(){"use strict";function turtleCtrl($scope,userFactory,timeFactory,notificationFactory,htmlNotificationFactory,calendarFactory,navbarFactory){function setParams(){navbarFactory.setSeo("Turtle Time Calculator","Determine your upcoming turtle time on this automatically-updating calculator and and receive a push notification on Android or desktop browser."),self.timezone=userFactory.getTimeZone(),self.digit=userFactory.getDigit(),self.version=userFactory.getVersion(),self.turtleTimes=[],self.notificationStatus=!0,self.htmlNotificationStatus=userFactory.getHtmlNotificationStatus(),self.notificationEnabled=notificationFactory.isEnabled(),self.htmlNotificationEnabled=htmlNotificationFactory.isEnabled(),getTurtleTimes(),toggleNotification()}function toggleNotification(){self.notificationStatus?notificationFactory.subscribe(function(err){return err?(self.notificationStatus=!1,void console.log(err)):void console.log("subscribed")}):notificationFactory.unsubscribe(function(err){return err?(console.log(err),void(self.notificationStatus=!0)):void console.log("unsubscribed")})}function getTurtleTimes(){timeFactory.getTurtleTimes(function(err,turtleTimes){return err?void console.log("unable to retrieve times"):void(self.turtleTimes=turtleTimes)})}var self=this;setParams(),self.toggleNotification=function(){toggleNotification()},self.updateDigit=function(){userFactory.setDigit(self.digit),getTurtleTimes()},self.updateVersion=function(){userFactory.setVersion(self.version),getTurtleTimes()},self.updateHtmlNotificationStatus=function(){userFactory.setHtmlNotificationStatus(self.htmlNotificationStatus),htmlNotificationFactory.setNotifications()},self.playExampleNotification=function(){notificationFactory.playExample()},self.playExampleHtmlNotification=function(){htmlNotificationFactory.playExample()},self.getCalendar=function(){calendarFactory.getCalendar()}}angular.module("app").controller("TurtleCtrl",turtleCtrl),turtleCtrl.$inject=["$scope","userFactory","timeFactory","notificationFactory","htmlNotificationFactory","calendarFactory","navbarFactory"]}(),function(){"use strict";function userFactory(localStorageService,$http,apiFactory,$translate){function loadFromStorage(){digit=localStorageService.get("digit")||0,timeFormat=localStorageService.get("timeFormat")||"standard",version=localStorageService.get("version")||"global",htmlNotificationStatus=localStorageService.get("htmlNotificationStatus")||!1,htmlNotificationSoundStatus=localStorageService.get("htmlNotificationSoundStatus")||!1,timeBeforeNotification=localStorageService.get("timeBeforeNotification")||10,detailedHourStatus=localStorageService.get("detailedHourStatus")||!1,locale=localStorageService.get("locale")||"en",$translate.use(locale),moment.locale(locale),password=localStorageService.get("password")||""}function postUserData(){var data={digit:digit%5,registrationId:registrationId,timeBefore:timeBeforeNotification};$http.post(apiFactory.getBaseUrl()+"/api/users",data).then(function(){console.log("posted subscription to server")})["catch"](function(){console.log("error posting subscription to server")})}function getTimeZone(){return jstz.determine().name()}function getDigit(){return digit}function setDigit(d){digit=d%5,localStorageService.set("digit",d),postUserData()}function getTimeFormat(){return timeFormat}function setTimeFormat(tf){timeFormat=tf,localStorageService.set("timeFormat",tf)}function getVersion(){return version}function setVersion(v){version=v,localStorageService.set("version",v)}function getHtmlNotificationStatus(){return htmlNotificationStatus}function setHtmlNotificationStatus(h){htmlNotificationStatus=h,localStorageService.set("htmlNotificationStatus",h)}function getTurtleTimes(){return turtleTimes}function setTurtleTimes(tt){turtleTimes=tt}function getHtmlNotificationSoundStatus(){return htmlNotificationSoundStatus}function setHtmlNotificationSoundStatus(s){htmlNotificationSoundStatus=s,localStorageService.set("htmlNotificationSoundStatus",s)}function getTimeBeforeNotification(){return timeBeforeNotification}function setTimeBeforeNotification(t){timeBeforeNotification=t,localStorageService.set("timeBeforeNotification",t),postUserData()}function getRegistrationId(){return registrationId}function setRegistrationId(r){registrationId=r,postUserData()}function getDetailedHourStatus(){return detailedHourStatus}function setDetailedHourStatus(d){detailedHourStatus=d,localStorageService.set("detailedHourStatus",d)}function getLocale(){return locale}function setLocale(l){locale=l,localStorageService.set("locale",l),$translate.use(l),moment.locale(locale)}function getPassword(){return password}function setPassword(p){password=p,localStorageService.set("password",p)}var digit,timeFormat,version,htmlNotificationStatus,htmlNotificationSoundStatus,turtleTimes,timeBeforeNotification,registrationId,detailedHourStatus,locale,password,services={getTimeZone:getTimeZone,getDigit:getDigit,setDigit:setDigit,getTimeFormat:getTimeFormat,setTimeFormat:setTimeFormat,getVersion:getVersion,setVersion:setVersion,getHtmlNotificationStatus:getHtmlNotificationStatus,setHtmlNotificationStatus:setHtmlNotificationStatus,getHtmlNotificationSoundStatus:getHtmlNotificationSoundStatus,setHtmlNotificationSoundStatus:setHtmlNotificationSoundStatus,getTurtleTimes:getTurtleTimes,setTurtleTimes:setTurtleTimes,getTimeBeforeNotification:getTimeBeforeNotification,setTimeBeforeNotification:setTimeBeforeNotification,getRegistrationId:getRegistrationId,setRegistrationId:setRegistrationId,getDetailedHourStatus:getDetailedHourStatus,setDetailedHourStatus:setDetailedHourStatus,getLocale:getLocale,setLocale:setLocale,getPassword:getPassword,setPassword:setPassword};return loadFromStorage(),services}angular.module("app").factory("userFactory",userFactory),userFactory.$inject=["localStorageService","$http","apiFactory","$translate"]}(),function(){"use strict";function navbarCtrl($state,$mdSidenav,$translate,$scope,userFactory,navbarFactory){function activate(){self.menu=[{link:"turtle",title:$translate.instant("NAV_TURTLE"),icon:"fa-home"},{link:"barrel",title:$translate.instant("NAV_BARREL"),icon:"fa-users"},{link:"events",title:$translate.instant("NAV_EVENT"),icon:"fa-calendar-o"},{link:"contact",title:$translate.instant("NAV_CONTACT"),icon:"fa-envelope"},{link:"settings",title:$translate.instant("NAV_SETTINGS"),icon:"fa-cogs"}]}var self=this;self.seo=navbarFactory.getSeo(),activate(),self.isSelected=function(title){return $state.current.hasOwnProperty("data")?(self.title=$translate.instant($state.current.data.title),title===self.title):!1},self.toggleSidenav=function(){$mdSidenav("left").toggle()},$scope.$watch(function(){return userFactory.getLocale()},function(){activate()})}angular.module("app").controller("NavbarCtrl",navbarCtrl),navbarCtrl.$inject=["$state","$mdSidenav","$translate","$scope","userFactory","navbarFactory"]}(),function(){"use strict";function navbarFactory(){function getSeo(){return seo}function setSeo(title,description){return seo.pageTitle=title,seo.description=description,seo}var services={getSeo:getSeo,setSeo:setSeo},seo={pageTitle:"Home",description:"Supplement app for One Piece Treasure Cruise to help calculate your turtle times and set notifications."};return services}angular.module("app").factory("navbarFactory",navbarFactory),navbarFactory.$inject=[]}(),function(){"use strict";function settingsCtrl(userFactory,navbarFactory){var self=this;self.languages=[{language:"English",abbrev:"en"},{language:"Deutsch",abbrev:"de"},{language:"Español",abbrev:"es"},{language:"français",abbrev:"fr"}],navbarFactory.setSeo("Settings","Adjust your language and customize your notification settings."),self.timeFormat=userFactory.getTimeFormat(),self.htmlNotificationSoundStatus=userFactory.getHtmlNotificationSoundStatus(),self.timeBeforeNotification=userFactory.getTimeBeforeNotification(),self.locale=userFactory.getLocale(),self.setTimeFormat=function(){userFactory.setTimeFormat(self.timeFormat)},self.setHtmlNotificationSoundStatus=function(){userFactory.setHtmlNotificationSoundStatus(self.htmlNotificationSoundStatus)},self.updateTimeBefereNotification=function(){userFactory.setTimeBeforeNotification(self.timeBeforeNotification)},self.updateLocale=function(){userFactory.setLocale(self.locale)}}angular.module("app").controller("SettingsCtrl",settingsCtrl),settingsCtrl.$inject=["userFactory","navbarFactory"]}(),function(){"use strict";function config($stateProvider,$urlRouterProvider,$locationProvider){$urlRouterProvider.otherwise("/turtle"),$stateProvider.state("turtle",{url:"/turtle",templateUrl:"turtle/turtle.html",controller:"TurtleCtrl",controllerAs:"turtle",data:{title:"NAV_TURTLE"}}).state("barrel",{url:"/barrel",templateUrl:"barrel/barrel.html",controller:"BarrelCtrl",controllerAs:"barrel",data:{title:"NAV_BARREL"}}).state("events",{url:"/events",templateUrl:"events/events.html",controller:"EventsCtrl",controllerAs:"events",data:{title:"NAV_EVENT"}}).state("contact",{url:"/contact",templateUrl:"contact/contact.html",controller:"ContactCtrl",controllerAs:"contact",data:{title:"NAV_CONTACT"}}).state("settings",{url:"/settings",templateUrl:"settings/settings.html",controller:"SettingsCtrl",controllerAs:"settings",data:{title:"NAV_SETTINGS"}}).state("admin",{url:"/admin",templateUrl:"admin/admin.html",controller:"AdminCtrl",controllerAs:"admin",data:{title:"Admin"}}),$locationProvider.hashPrefix("!")}angular.module("app").config(config),
config.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFkbWluQ3RybC5qcyIsImFkbWluRmFjdG9yeS5qcyIsImJhcnJlbEN0cmwuanMiLCJiYXJyZWxGYWN0b3J5LmpzIiwibG9jYWxpemVDb25maWcuanMiLCJjb250YWN0Q3RybC5qcyIsImV2ZW50c0N0cmwuanMiLCJldmVudHNGYWN0b3J5LmpzIiwiYXBpRmFjdG9yeS5qcyIsImNhbGVuZGFyRmFjdG9yeS5qcyIsImh0bWxOb3RpZmljYXRpb25GYWN0b3J5LmpzIiwibm90aWZpY2F0aW9uRmFjdG9yeS5qcyIsInRpbWVGYWN0b3J5LmpzIiwidHVydGxlQ3RybC5qcyIsInVzZXJGYWN0b3J5LmpzIiwibmF2YmFyQ3RybC5qcyIsIm5hdmJhckZhY3RvcnkuanMiLCJzZXR0aW5nc0N0cmwuanMiLCJyb3V0ZS1jb25maWcuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsIkFkbWluQ3RybCIsImFkbWluRmFjdG9yeSIsInVzZXJGYWN0b3J5IiwibmF2YmFyRmFjdG9yeSIsImFjdGl2YXRlIiwic2V0U2VvIiwiZ2V0VHVydGxlRGF0ZXMiLCJlcnIiLCJnbG9iYWxEYXRlcyIsImphcGFuRGF0ZXMiLCJjb25zb2xlIiwibG9nIiwic2VsZiIsInRoaXMiLCJnbG9iYWxTZWxlY3RlZCIsImphcGFuU2VsZWN0ZWQiLCJwYXNzd29yZCIsImdldFBhc3N3b3JkIiwiYWRkQm90aCIsImFkZERhdGUiLCJ2ZXJzaW9uIiwiZGF0ZSIsInR1cnRsZURhdGUiLCJ0b0lTT1N0cmluZyIsInNsaWNlIiwiYWRkVHVydGxlRGF0ZSIsInJlbW92ZVNlbGVjdGVkRGF0ZXMiLCJkYXRlcyIsIm1hcCIsImNvbmNhdCIsInJlbW92ZVR1cnRsZURhdGVzIiwicmVtb3ZlUGFzdERhdGVzIiwiZ2V0UGFzdERhdGVzIiwib2xkRGF0ZXMiLCJyZXZlcnNlIiwiZmlsdGVyIiwibW9tZW50IiwidXRjIiwiYWRkIiwiaXNCZWZvcmUiLCJNYXRoIiwiZmxvb3IiLCJsZW5ndGgiLCJhZGRRdWFydGVyIiwidXBkYXRlUGFzc3dvcmQiLCJzZXRQYXNzd29yZCIsImNvbnRyb2xsZXIiLCIkaW5qZWN0IiwiJGh0dHAiLCJhcGlGYWN0b3J5IiwiY2IiLCJnZXQiLCJnZXRCYXNlVXJsIiwidGhlbiIsInJlc3BvbnNlIiwiaSIsImRhdGEiLCJwdXNoIiwiYWRkRGF0ZVRvQXJyYXkiLCJhcnIiLCJOVU1fV0VFS1MiLCJzdGFydCIsInN0YXJ0T2YiLCJmb3JtYXQiLCJhZGRUdXJ0bGVEYXRlcyIsInJ1bkNvdW50IiwiZGF0ZVN0cmluZyIsImNvbnZlcnRUb1VUQyIsInBvc3QiLCJyZW1vdmVUdXJ0bGVEYXRlIiwicGFyYW1zIiwic2VydmljZXMiLCJmYWN0b3J5IiwiYmFycmVsQ3RybCIsIiRtZE1lZGlhIiwiYmFycmVsRmFjdG9yeSIsInNldFBhcmFtcyIsImdldFZlcnNpb24iLCJiYXJyZWxUaW1lcyIsImdldEJhcnJlbFRpbWVzIiwiZ2V0RGV0YWlsZWRIb3VyU3RhdHVzIiwidXBkYXRlVmVyc2lvbiIsInNldFZlcnNpb24iLCJpc0xhcmdlU2NyZWVuIiwic2hvd0hvdXJzIiwic2V0RGV0YWlsZWRIb3VyU3RhdHVzIiwiZ2V0VGltZSIsImRheU51bSIsInN0YXJ0T2ZEYXkiLCJjbG9uZSIsIndvb2QiLCJzaWx2ZXIiLCJnb2xkIiwib2Zmc2V0IiwiZGF5T2ZZZWFyIiwiaW5kZXgxIiwiaW5kZXgyIiwid29vZERpZ2l0cyIsInNpbHZlckRpZ2l0cyIsImdvbGREaWdpdHMiLCJob3VyRGlzcGxheSIsIk5VTV9EQVlTIiwiZ2V0U3RhcnRFbmRUaW1lcyIsImVuZCIsImxvY2FsIiwibm93IiwiaG91ck9mZnNldCIsImlzQWZ0ZXIiLCJjb25maWciLCIkdHJhbnNsYXRlUHJvdmlkZXIiLCJ0cmFuc2xhdGlvbnMiLCJOQVZfVFVSVExFIiwiTkFWX0JBUlJFTCIsIk5BVl9FVkVOVCIsIk5BVl9DT05UQUNUIiwiTkFWX1NFVFRJTkdTIiwiVFRfVElUTEUiLCJUVF9ESUdJVCIsIlRUX0ZPUk1BVCIsIlRUX1NUQU5EQVJEIiwiVFRfTUlMSVRBUlkiLCJUVF9USU1FWk9ORSIsIlRUX1NFRU1PUkUiLCJUVF9BRERfQ0FMRU5EQVIiLCJUVF9OT1RJRklDQVRJT04iLCJUVF9IVE1MX05PVElGSUNBVElPTiIsIlRUX05PVElGX1RFU1QiLCJUVF9IVE1MX05PVElGX1RFU1QiLCJUVF9OT1RJRl9NSU5VVEVTIiwiVFRfTUlOVVRFUyIsIlRUX05PVElGX1NPVU5EIiwiVFRfTk9USUZfRVhBTVBMRSIsIkJCX1RJVExFIiwiQkJfVElNRSIsIkJCX0FMVCIsIkJCX0RBVEUiLCJCQl9XT09ERU4iLCJCQl9TSUxWRVIiLCJCQl9HT0xEIiwicHJlZmVycmVkTGFuZ3VhZ2UiLCJ1c2VTYW5pdGl6ZVZhbHVlU3RyYXRlZ3kiLCJjb250YWN0Q3RybCIsInNlbmRpbmciLCJzdWJqZWN0cyIsIm1lc3NhZ2UiLCJpc1R1cnRsZUJ1ZyIsInVuZGVmaW5lZCIsInN1YmplY3QiLCJzZW5kTWVzc2FnZSIsInN0YXR1cyIsImV2ZW50c0N0cmwiLCJldmVudHNGYWN0b3J5IiwiZXZlbnRUaW1lcyIsImdldEV2ZW50VGltZXMiLCJkcm9wIiwiZHJvcFRhYmxlIiwic3BsaXQiLCJzdGFtaW5hIiwic3RhbWluYVRhYmxlIiwiYmVsaSIsImJlbGlUYWJsZSIsInN0YXJ0RGF0ZSIsImhvdXJTdHJpbmciLCJnZXRTdGFydFRpbWUiLCJzdWJ0cmFjdCIsImRvY3VtZW50IiwibG9jYXRpb24iLCJob3N0bmFtZSIsImNhbGVuZGFyRmFjdG9yeSIsImdldENhbGVuZGFyIiwiYmVnaW4iLCJ0dXJ0bGVUaW1lcyIsImdldFR1cnRsZVRpbWVzIiwidHVydGxlVGltZSIsImNhbCIsImljcyIsImRlc2NyaXB0aW9uIiwiYWRkRXZlbnQiLCJkb3dubG9hZCIsImh0bWxOb3RpZmljYXRpb25GYWN0b3J5IiwiaXNFbmFibGVkIiwibW9iaWxlQW5kVGFibGV0Q2hlY2siLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiY2hlY2siLCJhIiwic3Vic3RyIiwidmVuZG9yIiwid2luZG93Iiwib3BlcmEiLCJOb3RpZmljYXRpb24iLCJyZXF1ZXN0UGVybWlzc2lvbiIsInNldE5vdGlmaWNhdGlvbnMiLCJ0aW1lVW50aWwiLCJzb3VuZEVuYWJsZWQiLCJnZXRIdG1sTm90aWZpY2F0aW9uU291bmRTdGF0dXMiLCJtaW51dGVzIiwiZ2V0VGltZUJlZm9yZU5vdGlmaWNhdGlvbiIsIm9wdGlvbnMiLCJib2R5IiwiaWNvbiIsImlzTmFOIiwibm90aWZpY2F0aW9ucyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzb3VuZCIsInBsYXkiLCJwbGF5RXhhbXBsZSIsIkF1ZGlvIiwibm90aWZpY2F0aW9uRmFjdG9yeSIsImF0dGFjaFdvcmtlciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwic2VydmljZVdvcmtlciIsInJlZ2lzdGVyIiwicmVhZHkiLCJzZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uIiwicmVnIiwic3Vic2NyaWJlIiwiYXV4IiwicHVzaE1hbmFnZXIiLCJnZXRTdWJzY3JpcHRpb24iLCJwdXNoU3Vic2NyaXB0aW9uIiwic3ViIiwic2VuZFN1YnNjcmlwdGlvblRvU2VydmVyIiwidXNlclZpc2libGVPbmx5IiwiZW5kcG9pbnQiLCJ1bnN1YnNjcmliZSIsImV2ZW50IiwibWF0Y2giLCJyZWdpc3RyYXRpb25JZCIsInNldFJlZ2lzdHJhdGlvbklkIiwicmVnaXN0cmF0aW9uSWRzIiwiZ2V0UmVnaXN0cmF0aW9uSWQiLCJ0aW1lRmFjdG9yeSIsImRpZ2l0IiwiZ2V0RGlnaXQiLCJ0aW1lRm9ybWF0IiwiZ2V0VGltZUZvcm1hdCIsIm51bU9mRGF5cyIsInNldFR1cnRsZVRpbWVzIiwidGltZSIsImdldEZvcm1hdHRlZFRpbWVzIiwidGltZVN0ciIsInR1cnRsZUN0cmwiLCIkc2NvcGUiLCJ0aW1lem9uZSIsImdldFRpbWVab25lIiwibm90aWZpY2F0aW9uU3RhdHVzIiwiaHRtbE5vdGlmaWNhdGlvblN0YXR1cyIsImdldEh0bWxOb3RpZmljYXRpb25TdGF0dXMiLCJub3RpZmljYXRpb25FbmFibGVkIiwiaHRtbE5vdGlmaWNhdGlvbkVuYWJsZWQiLCJ0b2dnbGVOb3RpZmljYXRpb24iLCJ1cGRhdGVEaWdpdCIsInNldERpZ2l0IiwidXBkYXRlSHRtbE5vdGlmaWNhdGlvblN0YXR1cyIsInNldEh0bWxOb3RpZmljYXRpb25TdGF0dXMiLCJwbGF5RXhhbXBsZU5vdGlmaWNhdGlvbiIsInBsYXlFeGFtcGxlSHRtbE5vdGlmaWNhdGlvbiIsImxvY2FsU3RvcmFnZVNlcnZpY2UiLCIkdHJhbnNsYXRlIiwibG9hZEZyb21TdG9yYWdlIiwiaHRtbE5vdGlmaWNhdGlvblNvdW5kU3RhdHVzIiwidGltZUJlZm9yZU5vdGlmaWNhdGlvbiIsImRldGFpbGVkSG91clN0YXR1cyIsImxvY2FsZSIsInVzZSIsInBvc3RVc2VyRGF0YSIsInRpbWVCZWZvcmUiLCJqc3R6IiwiZGV0ZXJtaW5lIiwibmFtZSIsImQiLCJzZXQiLCJzZXRUaW1lRm9ybWF0IiwidGYiLCJ2IiwiaCIsInR0Iiwic2V0SHRtbE5vdGlmaWNhdGlvblNvdW5kU3RhdHVzIiwicyIsInNldFRpbWVCZWZvcmVOb3RpZmljYXRpb24iLCJ0IiwiciIsImdldExvY2FsZSIsInNldExvY2FsZSIsImwiLCJwIiwibmF2YmFyQ3RybCIsIiRzdGF0ZSIsIiRtZFNpZGVuYXYiLCJtZW51IiwibGluayIsInRpdGxlIiwiaW5zdGFudCIsInNlbyIsImdldFNlbyIsImlzU2VsZWN0ZWQiLCJjdXJyZW50IiwiaGFzT3duUHJvcGVydHkiLCJ0b2dnbGVTaWRlbmF2IiwidG9nZ2xlIiwiJHdhdGNoIiwicGFnZVRpdGxlIiwic2V0dGluZ3NDdHJsIiwibGFuZ3VhZ2VzIiwibGFuZ3VhZ2UiLCJhYmJyZXYiLCJ1cGRhdGVUaW1lQmVmZXJlTm90aWZpY2F0aW9uIiwidXBkYXRlTG9jYWxlIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIm90aGVyd2lzZSIs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a1IsYUFBQSxVQUNBeFEsTUFDQWdQLE1BQUEsaUJBR0FxQixNQUFBLFlBQ0FDLElBQUEsWUFDQUMsWUFBQSx5QkFDQWpSLFdBQUEsZUFDQWtSLGFBQUEsV0FDQXhRLE1BQ0FnUCxNQUFBLGtCQUdBcUIsTUFBQSxTQUNBQyxJQUFBLFNBQ0FDLFlBQUEsbUJBQ0FqUixXQUFBLFlBQ0FrUixhQUFBLFFBQ0F4USxNQUNBZ1AsTUFBQSxXQUtBbUIsa0JBQUFNLFdBQUEsS0FqRUFuVSxRQUFBQyxPQUFBLE9BQ0E2RyxPQUFBQTtBQUVBQSxPQUFBN0QsU0FBQSxpQkFBQSxxQkFBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXInLCAnbmdNYXRlcmlhbCcsICdMb2NhbFN0b3JhZ2VNb2R1bGUnLCAnbWQuZGF0YS50YWJsZScsICdwYXNjYWxwcmVjaHQudHJhbnNsYXRlJ10pOyIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdBZG1pbkN0cmwnLCBBZG1pbkN0cmwpO1xuXG4gIEFkbWluQ3RybC4kaW5qZWN0ID0gWydhZG1pbkZhY3RvcnknLCAndXNlckZhY3RvcnknLCAnbmF2YmFyRmFjdG9yeSddO1xuXG4gIGZ1bmN0aW9uIEFkbWluQ3RybChhZG1pbkZhY3RvcnksIHVzZXJGYWN0b3J5LCBuYXZiYXJGYWN0b3J5KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYuZ2xvYmFsRGF0ZXMgPSBbXTtcbiAgICBzZWxmLmphcGFuRGF0ZXMgPSBbXTtcbiAgICBzZWxmLmdsb2JhbFNlbGVjdGVkID0gW107XG4gICAgc2VsZi5qYXBhblNlbGVjdGVkID0gW107XG4gICAgc2VsZi5wYXNzd29yZCA9IHVzZXJGYWN0b3J5LmdldFBhc3N3b3JkKCk7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBuYXZiYXJGYWN0b3J5LnNldFNlbygnQWRtaW4nLCAnQWRtaW4gcGFnZSBmb3IgbWFuYWdpbmcgZXZlbnQgZGF0ZXMuJyk7XG4gICAgICBhZG1pbkZhY3RvcnkuZ2V0VHVydGxlRGF0ZXMoZnVuY3Rpb24oZXJyLCBnbG9iYWxEYXRlcywgamFwYW5EYXRlcykge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2VyciA9JywgZXJyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmdsb2JhbERhdGVzID0gZ2xvYmFsRGF0ZXM7XG4gICAgICAgIHNlbGYuamFwYW5EYXRlcyA9IGphcGFuRGF0ZXM7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBzZWxmLmFkZEJvdGggPSBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuYWRkRGF0ZSgnZ2xvYmFsJyk7XG4gICAgICBzZWxmLmFkZERhdGUoJ2phcGFuJyk7XG4gICAgfTtcblxuICAgIHNlbGYuYWRkRGF0ZSA9IGZ1bmN0aW9uKHZlcnNpb24pIHtcbiAgICAgIHZhciBkYXRlID0gc2VsZi50dXJ0bGVEYXRlLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuICAgICAgYWRtaW5GYWN0b3J5LmFkZFR1cnRsZURhdGUoZGF0ZSwgdmVyc2lvbiwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyID0nLCBlcnIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRPLURPOiBhZGQgdG9hc3Qgbm90aWZpY2F0aW9uXG4gICAgICAgIGNvbnNvbGUubG9nKCdBZGRlZCB0dXJ0bGUgZGF0ZScpO1xuICAgICAgICBhY3RpdmF0ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2VsZi5yZW1vdmVTZWxlY3RlZERhdGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGF0ZXMgPSBzZWxmLmdsb2JhbFNlbGVjdGVkLm1hcChmdW5jdGlvbihkYXRlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHVydGxlRGF0ZTogZGF0ZSxcbiAgICAgICAgICB2ZXJzaW9uOiAnZ2xvYmFsJyxcbiAgICAgICAgfTtcbiAgICAgIH0pLmNvbmNhdChzZWxmLmphcGFuU2VsZWN0ZWQubWFwKGZ1bmN0aW9uKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0dXJ0bGVEYXRlOiBkYXRlLFxuICAgICAgICAgIHZlcnNpb246ICdqYXBhbicsXG4gICAgICAgIH07XG4gICAgICB9KSk7XG5cbiAgICAgIGFkbWluRmFjdG9yeS5yZW1vdmVUdXJ0bGVEYXRlcyhkYXRlcywgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyID0nLCBlcnIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGFjdGl2YXRlKCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgc2VsZi5yZW1vdmVQYXN0RGF0ZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBvbGREYXRlcyA9IGdldFBhc3REYXRlcygnZ2xvYmFsJykuY29uY2F0KGdldFBhc3REYXRlcygnamFwYW4nKSk7XG5cbiAgICAgIGFkbWluRmFjdG9yeS5yZW1vdmVUdXJ0bGVEYXRlcyhvbGREYXRlcywgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyID0nLCBlcnIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdyZW1vdmVkIG9sZCBkYXRlcycpO1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gZ2V0UGFzdERhdGVzKHZlcnNpb24pIHtcbiAgICAgICAgdmFyIG9sZERhdGVzID0gKHZlcnNpb24gPT09ICdnbG9iYWwnKSA/IFxuICAgICAgICAgIHNlbGYuZ2xvYmFsRGF0ZXMuc2xpY2UoKS5yZXZlcnNlKCkgOiBzZWxmLmphcGFuRGF0ZXMuc2xpY2UoKS5yZXZlcnNlKCk7XG5cbiAgICAgICAgdmFyIG9sZERhdGVzID0gb2xkRGF0ZXMuZmlsdGVyKGZ1bmN0aW9uKGRhdGUpIHtcbiAgICAgICAgICByZXR1cm4gbW9tZW50LnV0YyhkYXRlKS5hZGQoMSwgJ2RheXMnKS5pc0JlZm9yZShtb21lbnQudXRjKCkpXG4gICAgICAgIH0pLm1hcChmdW5jdGlvbihkYXRlKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR1cnRsZURhdGU6IGRhdGUsXG4gICAgICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uLFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHJlbW92ZSBwYXN0IGRhdGVzIGluIG11bHRpcGxlcyBvZiA1XG4gICAgICAgIG9sZERhdGVzID0gb2xkRGF0ZXMuc2xpY2UoMCwgTWF0aC5mbG9vcihvbGREYXRlcy5sZW5ndGgvNSkqNSk7XG5cbiAgICAgICAgcmV0dXJuIG9sZERhdGVzO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNlbGYuYWRkUXVhcnRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgYWRtaW5GYWN0b3J5LmFkZFF1YXJ0ZXIoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyID0nLCBlcnIpO1xuICAgICAgICB9XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcbiAgICAgIH0pXG4gICAgfTtcblxuICAgIHNlbGYudXBkYXRlUGFzc3dvcmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHVzZXJGYWN0b3J5LnNldFBhc3N3b3JkKHNlbGYucGFzc3dvcmQpO1xuICAgIH1cbiAgfVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ2FkbWluRmFjdG9yeScsIGFkbWluRmFjdG9yeSk7XG5cbiAgYWRtaW5GYWN0b3J5LiRpbmplY3QgPSBbJyRodHRwJywgJ2FwaUZhY3RvcnknLCAndXNlckZhY3RvcnknXTtcblxuICBmdW5jdGlvbiBhZG1pbkZhY3RvcnkoJGh0dHAsIGFwaUZhY3RvcnksIHVzZXJGYWN0b3J5KSB7XG4gICAgdmFyIHNlcnZpY2VzID0ge1xuICAgICAgYWRkVHVydGxlRGF0ZTogYWRkVHVydGxlRGF0ZSxcbiAgICAgIGFkZFR1cnRsZURhdGVzOiBhZGRUdXJ0bGVEYXRlcyxcbiAgICAgIHJlbW92ZVR1cnRsZURhdGVzOiByZW1vdmVUdXJ0bGVEYXRlcyxcbiAgICAgIGdldFR1cnRsZURhdGVzOiBnZXRUdXJ0bGVEYXRlcyxcbiAgICAgIGFkZFF1YXJ0ZXI6IGFkZFF1YXJ0ZXIsXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlcztcblxuICAgIGZ1bmN0aW9uIGdldFR1cnRsZURhdGVzKGNiKSB7XG4gICAgICAkaHR0cC5nZXQoYXBpRmFjdG9yeS5nZXRCYXNlVXJsKCkgKyAnL2FwaS90dXJ0bGUvZGF0ZScpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpIHtcbiAgICAgICAgICB2YXIgZ2xvYmFsRGF0ZXMgPSBbXTtcbiAgICAgICAgICB2YXIgamFwYW5EYXRlcyA9IFtdO1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNwb25zZS5kYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YVtpXS52ZXJzaW9uID09PSAnZ2xvYmFsJykge1xuICAgICAgICAgICAgICBnbG9iYWxEYXRlcy5wdXNoKHJlc3BvbnNlLmRhdGFbaV0udHVydGxlRGF0ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBqYXBhbkRhdGVzLnB1c2gocmVzcG9uc2UuZGF0YVtpXS50dXJ0bGVEYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYihudWxsLCBnbG9iYWxEYXRlcywgamFwYW5EYXRlcyk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKCkge1xuICAgICAgICAgIGNiKCd1bmFibGUgdG8gZ2V0IHR1cnRsZSBkYXRlcycpO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGFkZFF1YXJ0ZXIoY2IpIHtcbiAgICAgIHZhciBOVU1fV0VFS1MgPSAxMztcbiAgICAgIHZhciBkYXRlcyA9IFtdO1xuXG4gICAgICB2YXIgc3RhcnQgPSBtb21lbnQudXRjKCkuc3RhcnRPZignaXNvV2VlaycpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE5VTV9XRUVLUzsgaSsrKSB7XG4gICAgICAgIGFkZERhdGVUb0FycmF5KGRhdGVzLCBzdGFydC5mb3JtYXQoJ1lZWVktTU0tREQnKSwgJ2dsb2JhbCcpO1xuICAgICAgICBhZGREYXRlVG9BcnJheShkYXRlcywgc3RhcnQuZm9ybWF0KCdZWVlZLU1NLUREJyksICdqYXBhbicpO1xuICAgICAgICBzdGFydC5hZGQoJzQnLCAnZGF5cycpO1xuICAgICAgICBhZGREYXRlVG9BcnJheShkYXRlcywgc3RhcnQuZm9ybWF0KCdZWVlZLU1NLUREJyksICdnbG9iYWwnKTtcbiAgICAgICAgYWRkRGF0ZVRvQXJyYXkoZGF0ZXMsIHN0YXJ0LmZvcm1hdCgnWVlZWS1NTS1ERCcpLCAnamFwYW4nKTtcbiAgICAgICAgc3RhcnQuYWRkKCczJywgJ2RheXMnKTtcbiAgICAgIH1cblxuICAgICAgYWRkVHVydGxlRGF0ZXMoZGF0ZXMsIGNiKTtcblxuICAgICAgZnVuY3Rpb24gYWRkRGF0ZVRvQXJyYXkoYXJyLCB0dXJ0bGVEYXRlLCB2ZXJzaW9uKSB7XG4gICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICB0dXJ0bGVEYXRlOiB0dXJ0bGVEYXRlLFxuICAgICAgICAgIHZlcnNpb246IHZlcnNpb24sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFR1cnRsZURhdGVzKGRhdGVzLCBjYikge1xuICAgICAgdmFyIHJ1bkNvdW50ID0gMDtcbiAgICAgIFxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBhZGRUdXJ0bGVEYXRlKGRhdGVzW2ldLnR1cnRsZURhdGUsIGRhdGVzW2ldLnZlcnNpb24sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnIgPScsIGVycik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCsrcnVuQ291bnQgPT09IGRhdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkVHVydGxlRGF0ZShkYXRlU3RyaW5nLCB2ZXJzaW9uLCBjYikge1xuICAgICAgdmFyIHR1cnRsZURhdGUgPSBjb252ZXJ0VG9VVEMoZGF0ZVN0cmluZyk7XG4gICAgICAkaHR0cC5wb3N0KGFwaUZhY3RvcnkuZ2V0QmFzZVVybCgpICsgJy9hcGkvdHVydGxlL2RhdGUnLCB7XG4gICAgICAgIHR1cnRsZURhdGU6IHR1cnRsZURhdGUsXG4gICAgICAgIHZlcnNpb246IHZlcnNpb24sXG4gICAgICAgIHBhc3N3b3JkOiB1c2VyRmFjdG9yeS5nZXRQYXNzd29yZCgpLFxuICAgICAgfSkudGhlbihmdW5jdGlvbiBzdWNjZXNzKCkge1xuICAgICAgICBjYihudWxsKTtcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKCkge1xuICAgICAgICBjYignVW5hYmxlIHRvIHNlbmQgbWVzc2FnZScpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlVHVydGxlRGF0ZXMoZGF0ZXMsIGNiKSB7XG4gICAgICBkYXRlcyA9IGRhdGVzLm1hcChmdW5jdGlvbihkYXRlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHVydGxlRGF0ZTogY29udmVydFRvVVRDKGRhdGUudHVydGxlRGF0ZSksXG4gICAgICAgICAgdmVyc2lvbjogZGF0ZS52ZXJzaW9uLFxuICAgICAgICAgIHBhc3N3b3JkOiB1c2VyRmFjdG9yeS5nZXRQYXNzd29yZCgpLFxuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdkYXRlcyA9JywgZGF0ZXMpO1xuXG4gICAgICB2YXIgcnVuQ291bnQgPSAwO1xuICAgICAgXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlbW92ZVR1cnRsZURhdGUoZGF0ZXNbaV0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnIgPScsIGVycik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCsrcnVuQ291bnQgPT09IGRhdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZVR1cnRsZURhdGUodHVydGxlRGF0ZSwgY2IpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIHBhcmFtczogdHVydGxlRGF0ZSxcbiAgICAgIH07XG5cbiAgICAgICRodHRwLmRlbGV0ZShhcGlGYWN0b3J5LmdldEJhc2VVcmwoKSArICcvYXBpL3R1cnRsZS9kYXRlJywgcGFyYW1zKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2VzcygpIHtcbiAgICAgICAgY2IobnVsbCk7XG4gICAgICB9KS5jYXRjaChmdW5jdGlvbiBlcnJvcigpIHtcbiAgICAgICAgY2IoJ1VuYWJsZSB0byBkZWxldGUgJyArIHBhcmFtcy50dXJ0bGVEYXRlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gY29udmVydFRvVVRDKGRhdGVTdHJpbmcpIHtcbiAgICAgIHJldHVybiBtb21lbnQudXRjKGRhdGVTdHJpbmcpLmZvcm1hdCgneCcpO1xuICAgIH1cbiAgfVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gIC5jb250cm9sbGVyKCdCYXJyZWxDdHJsJywgYmFycmVsQ3RybCk7XG5cbiAgYmFycmVsQ3RybC4kaW5qZWN0ID0gWyckbWRNZWRpYScsICd1c2VyRmFjdG9yeScsICdiYXJyZWxGYWN0b3J5JywgJ25hdmJhckZhY3RvcnknXTtcblxuICBmdW5jdGlvbiBiYXJyZWxDdHJsKCRtZE1lZGlhLCB1c2VyRmFjdG9yeSwgYmFycmVsRmFjdG9yeSwgbmF2YmFyRmFjdG9yeSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHNldFBhcmFtcygpO1xuXG4gICAgZnVuY3Rpb24gc2V0UGFyYW1zKCkge1xuICAgICAgbmF2YmFyRmFjdG9yeS5zZXRTZW8oJ0JhcnJlbCBCcmVha2luZycsICdMb29rIHVwIHdoZW4gdG8gcGxheSB0aGUgZnJpZW5kIGdhbWUgd2l0aCB0aGlzIHVwLXRvLWRhdGUgY2hhcnQuJyk7XG4gICAgICBzZWxmLnZlcnNpb24gPSB1c2VyRmFjdG9yeS5nZXRWZXJzaW9uKCk7XG4gICAgICBzZWxmLmJhcnJlbFRpbWVzID0gYmFycmVsRmFjdG9yeS5nZXRCYXJyZWxUaW1lcygpO1xuICAgICAgc2VsZi5mb3JtYXQgPSB1c2VyRmFjdG9yeS5nZXREZXRhaWxlZEhvdXJTdGF0dXMoKTtcbiAgICB9XG5cbiAgICBzZWxmLnVwZGF0ZVZlcnNpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHVzZXJGYWN0b3J5LnNldFZlcnNpb24oc2VsZi52ZXJzaW9uKTtcbiAgICAgIHNlbGYuYmFycmVsVGltZXMgPSBiYXJyZWxGYWN0b3J5LmdldEJhcnJlbFRpbWVzKCk7XG4gICAgfTtcblxuICAgIHNlbGYuaXNMYXJnZVNjcmVlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICRtZE1lZGlhKCdndC1tZCcpO1xuICAgIH07XG5cbiAgICBzZWxmLnNob3dIb3VycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdXNlckZhY3Rvcnkuc2V0RGV0YWlsZWRIb3VyU3RhdHVzKHNlbGYuZm9ybWF0KTtcbiAgICB9XG4gIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAuZmFjdG9yeSgnYmFycmVsRmFjdG9yeScsIGJhcnJlbEZhY3RvcnkpO1xuXG4gIGJhcnJlbEZhY3RvcnkuJGluamVjdCA9IFsndXNlckZhY3RvcnknXTtcblxuICBmdW5jdGlvbiBiYXJyZWxGYWN0b3J5KHVzZXJGYWN0b3J5KSB7XG4gICAgdmFyIHNlcnZpY2VzID0ge1xuICAgICAgZ2V0QmFycmVsVGltZXM6IGdldEJhcnJlbFRpbWVzXG4gICAgfTtcblxuXG4gICAgcmV0dXJuIHNlcnZpY2VzO1xuXG4gICAgZnVuY3Rpb24gZ2V0QmFycmVsVGltZXMoKSB7XG4gICAgICB2YXIgdmVyc2lvbiA9IHVzZXJGYWN0b3J5LmdldFZlcnNpb24oKTtcbiAgICAgIHZhciBOVU1fREFZUyA9IDU7XG4gICAgICB2YXIgYmFycmVsVGltZXMgPSBbXTtcbiAgICAgIHZhciBkYXRhID0gZ2V0U3RhcnRFbmRUaW1lcyh2ZXJzaW9uKTtcbiAgICAgIHZhciBzdGFydCA9IGRhdGEuc3RhcnQ7XG4gICAgICB2YXIgZW5kID0gZGF0YS5lbmQ7XG4gICAgICB2YXIgaG91ckRpc3BsYXkgPSBzdGFydC5jbG9uZSgpLmxvY2FsKCkuZm9ybWF0KCdISDptbScpICsgJy0nICsgZW5kLmNsb25lKCkubG9jYWwoKS5mb3JtYXQoJ0hIOm1tJyk7XG4gICAgICB2YXIgZGF5T2ZZZWFyID0gc3RhcnQuZGF5T2ZZZWFyKCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE5VTV9EQVlTOyBpKyspIHtcbiAgICAgICAgYmFycmVsVGltZXMucHVzaChnZXRUaW1lKGkpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJhcnJlbFRpbWVzO1xuXG4gICAgICBmdW5jdGlvbiBnZXRUaW1lKGRheU51bSkge1xuICAgICAgICB2YXIgc3RhcnRPZkRheSA9IHN0YXJ0LmNsb25lKCkuYWRkKGRheU51bSwgJ2RheXMnKTtcbiAgICAgICAgdmFyIHdvb2QgPSBbMCwgNSwgNCwgOSwgMywgOCwgNCwgOSwgMiwgNywgMywgOCwgMSwgNiwgMiwgNywgMCwgNSwgMSwgNl07XG4gICAgICAgIHZhciBzaWx2ZXIgPSBbMSwgNiwgMiwgNywgMCwgNSwgMSwgNiwgMCwgNSwgNCwgOSwgMywgOCwgNCwgOSwgMiwgNywgMywgOF07XG4gICAgICAgIHZhciBnb2xkID0gWzMsIDgsIDIsIDcsIDEsIDYsIDAsIDUsIDQsIDldO1xuXG4gICAgICAgIHZhciBvZmZzZXQgPSBkYXlOdW0gKyBkYXlPZlllYXIgKyA0O1xuXG4gICAgICAgIHZhciBpbmRleDEgPSAob2Zmc2V0ICogNCkgJSAyMDtcbiAgICAgICAgdmFyIGluZGV4MiA9IChvZmZzZXQgKiAyKSAlIDEwO1xuXG4gICAgICAgIHZhciB3b29kRGlnaXRzID0gd29vZC5zbGljZShpbmRleDEsIGluZGV4MSArIDQpO1xuICAgICAgICB2YXIgc2lsdmVyRGlnaXRzID0gc2lsdmVyLnNsaWNlKGluZGV4MSwgaW5kZXgxICsgNCk7XG4gICAgICAgIHZhciBnb2xkRGlnaXRzID0gZ29sZC5zbGljZShpbmRleDIsIGluZGV4MiArIDIpO1xuICAgICAgICB2YXIgZGF0ZSA9IHN0YXJ0T2ZEYXkuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkYXRlOiBkYXRlLFxuICAgICAgICAgIHdvb2REaWdpdHM6IHdvb2REaWdpdHMsXG4gICAgICAgICAgc2lsdmVyRGlnaXRzOiBzaWx2ZXJEaWdpdHMsXG4gICAgICAgICAgZ29sZERpZ2l0czogZ29sZERpZ2l0cyxcbiAgICAgICAgICBob3VyRGlzcGxheTogaG91ckRpc3BsYXksXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0U3RhcnRFbmRUaW1lcyh2ZXJzaW9uKSB7XG4gICAgICB2YXIgbm93ID0gbW9tZW50KCk7XG4gICAgICB2YXIgaG91ck9mZnNldCA9ICh2ZXJzaW9uID09PSAnZ2xvYmFsJykgPyAxMiA6IDY7XG4gICAgICB2YXIgc3RhcnQgPSBtb21lbnQudXRjKCkuc3RhcnRPZignZGF5JykuYWRkKGhvdXJPZmZzZXQsICdob3VycycpO1xuICAgICAgdmFyIGVuZCA9IHN0YXJ0LmNsb25lKCkuYWRkKDIzLCAnaG91cnMnKS5hZGQoNTksICdtaW51dGVzJyk7O1xuXG4gICAgICBpZiAobm93LmlzQWZ0ZXIoZW5kKSkge1xuICAgICAgICBzdGFydC5hZGQoMSwgJ2RheScpO1xuICAgICAgICBlbmQuYWRkKDEsICdkYXknKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICBlbmQ6IGVuZCxcbiAgICAgIH07XG4gICAgfVxuXG4gIH1cblxufSkoKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAuY29uZmlnKGZ1bmN0aW9uICgkdHJhbnNsYXRlUHJvdmlkZXIpIHtcbiAgICAkdHJhbnNsYXRlUHJvdmlkZXIudHJhbnNsYXRpb25zKCdlbicsIHtcbiAgICAgIE5BVl9UVVJUTEU6ICdUdXJ0bGUgVGltZScsXG4gICAgICBOQVZfQkFSUkVMOiAnQmFycmVsIEJyZWFraW5nJyxcbiAgICAgIE5BVl9FVkVOVDogJ0V2ZW50JyxcbiAgICAgIE5BVl9DT05UQUNUOiAnQ29udGFjdCBNZScsXG4gICAgICBOQVZfU0VUVElOR1M6ICdTZXR0aW5ncycsXG4gICAgICBUVF9USVRMRTogJ1R1cnRsZSBUaW1lIENhbGN1bGF0b3InLFxuICAgICAgVFRfRElHSVQ6ICc2dGggZGlnaXQgb2YgSUQnLFxuICAgICAgVFRfRk9STUFUOiAnVGltZSBGb3JtYXQnLFxuICAgICAgVFRfU1RBTkRBUkQ6ICdTdGFuZGFyZCcsXG4gICAgICBUVF9NSUxJVEFSWTogJzI0aHIgZm9ybWF0JyxcbiAgICAgIFRUX1RJTUVaT05FOiAnVGltZSBab25lOicsXG4gICAgICBUVF9TRUVNT1JFOiAnU2VlIE1vcmUnLFxuICAgICAgVFRfQUREX0NBTEVOREFSOiAnQWRkIHRvIENhbGVuZGFyJyxcbiAgICAgIFRUX05PVElGSUNBVElPTjogJ0Nocm9tZS9BbmRyb2lkIE5vdGlmaWNhdGlvbnMnLFxuICAgICAgVFRfSFRNTF9OT1RJRklDQVRJT046ICdIVE1MIE5vdGlmaWNhdGlvbnMnLFxuICAgICAgVFRfTk9USUZfVEVTVDogJ0V4YW1wbGUgQ2hyb21lL0FuZHJvaWQgTm90aWZpY2F0aW9uJyxcbiAgICAgIFRUX0hUTUxfTk9USUZfVEVTVDogJ0V4YW1wbGUgSFRNTCBOb3RpZmljYXRpb24nLFxuICAgICAgVFRfTk9USUZfTUlOVVRFUzogJ05vdGlmaWNhdGlvbiB0aW1lIGluIGFkdmFuY2UnLFxuICAgICAgVFRfTUlOVVRFUzogJ01pbnV0ZXMnLFxuICAgICAgVFRfTk9USUZfU09VTkQ6ICdQbGF5IHNvdW5kJyxcbiAgICAgIFRUX05PVElGX0VYQU1QTEU6ICdFeGFtcGxlJyxcbiAgICAgIEJCX1RJVExFOiAnQmFycmVsIEJyZWFraW5nJyxcbiAgICAgIEJCX1RJTUU6ICdUaW1lIHRpbGwgbmV4dCByb3RhdGlvbjonLFxuICAgICAgQkJfQUxUOiAnU2hvdyBIb3VycycsXG4gICAgICBCQl9EQVRFOiAnRGF0ZScsXG4gICAgICBCQl9XT09ERU46ICdXb29kZW4nLFxuICAgICAgQkJfU0lMVkVSOiAnU2lsdmVyJyxcbiAgICAgIEJCX0dPTEQ6ICdHb2xkJ1xuICAgIH0pXG4gICAgLnRyYW5zbGF0aW9ucygnZGUnLCB7XG4gICAgICBOQVZfVFVSVExFOiAnVHVydGxlIFplaXRlbicsXG4gICAgICBOQVZfQkFSUkVMOiAnRnJpZW5kIEdhbWUnLFxuICAgICAgTkFWX0VWRU5UOiAnRXJlaWduaXMnLFxuICAgICAgTkFWX0NPTlRBQ1Q6ICdLb250YWt0aWVyZSBNaWNoJyxcbiAgICAgIE5BVl9TRVRUSU5HUzogJ0VpbnN0ZWxsdW5nZW4nLFxuICAgICAgVFRfVElUTEU6ICdUdXJ0bGUgWmVpdGVuIFJlY2huZXInLFxuICAgICAgVFRfRElHSVQ6ICc2dGUgWmlmZmVyIGRlciBJRCcsXG4gICAgICBUVF9GT1JNQVQ6ICdaZWl0Zm9ybWF0JyxcbiAgICAgIFRUX1NUQU5EQVJEOiAnU3RhbmRhcmQnLFxuICAgICAgVFRfTUlMSVRBUlk6ICcyNC1TdHVuZGVuJyxcbiAgICAgIFRUX1RJTUVaT05FOiAnWmVpdHpvbmU6JyxcbiAgICAgIFRUX1NFRU1PUkU6ICdzaWVoZSBtZWhyJyxcbiAgICAgIFRUX0FERF9DQUxFTkRBUjogJ1p1bSBLYWxlbmRlciBoaW56dWbDvGdlbicsXG4gICAgICBUVF9OT1RJRklDQVRJT046ICdDaHJvbWUvQW5kcm9pZCBCZW5hY2hyaWNodGlndW5nJyxcbiAgICAgIFRUX0hUTUxfTk9USUZJQ0FUSU9OOiAnSFRNTCBCZW5hY2hyaWNodGlndW5nJyxcbiAgICAgIFRUX05PVElGX1RFU1Q6ICdCZWlzcGllbCBDaHJvbWUvQW5kcm9pZCBCZW5hY2hyaWNodGlndW5nJyxcbiAgICAgIFRUX0hUTUxfTk9USUZfVEVTVDogJ0JlaXNwaWVsIEhUTUwgQmVuYWNocmljaHRpZ3VuZycsXG4gICAgICBUVF9OT1RJRl9NSU5VVEVTOiAnSFRNTC1CZW5hY2hyaWNodGlndW5nJyxcbiAgICAgIFRUX01JTlVURVM6ICdNaW51dGVuJyxcbiAgICAgIFRUX05PVElGX1NPVU5EOiAnVG9uIGFic3BpZWxlbicsXG4gICAgICBUVF9OT1RJRl9FWEFNUExFOiAnQmVpc3BpZWwnLFxuICAgICAgQkJfVElUTEU6ICdCYXJyZWwgQnJlYWtpbmcnLFxuICAgICAgQkJfVElNRTogJ1plaXQgYmlzIHp1bSBuw6RjaHN0ZW4gV2VjaHNlbDonLFxuICAgICAgQkJfQUxUOiAnQW56ZWlnZSBTdHVuZGVuJyxcbiAgICAgIEJCX0RBVEU6ICdEYXR1bScsXG4gICAgICBCQl9XT09ERU46ICdIb2x6JyxcbiAgICAgIEJCX1NJTFZFUjogJ1NpbGJlcicsXG4gICAgICBCQl9HT0xEOiAnR29sZCdcbiAgICB9KVxuICAgIC50cmFuc2xhdGlvbnMoJ2VzJywge1xuICAgICAgTkFWX1RVUlRMRTogJ0hvcmFyaW8gVG9ydHVnYXMnLFxuICAgICAgTkFWX0JBUlJFTDogJ0ZyaWVuZCBHYW1lJyxcbiAgICAgIE5BVl9FVkVOVDogJ0V2ZW50bycsXG4gICAgICBOQVZfQ09OVEFDVDogJ0NvbnTDoWN0YW1lJyxcbiAgICAgIE5BVl9TRVRUSU5HUzogJ0NvbmZpZ3VyYWNpw7NuJyxcbiAgICAgIFRUX1RJVExFOiAnSG9yYXJpbyBUb3J0dWdhcyBDYWxjdWxhZG9yYScsXG4gICAgICBUVF9ESUdJVDogJzZ0aCBkw61naXRvIGRlIElEJyxcbiAgICAgIFRUX0ZPUk1BVDogJ2Zvcm1hdG8gZGUgdGllbXBvJyxcbiAgICAgIFRUX1NUQU5EQVJEOiAnZXN0w6FuZGFyJyxcbiAgICAgIFRUX01JTElUQVJZOiAnMjQgaG9yYXMnLFxuICAgICAgVFRfVElNRVpPTkU6ICdab25hIEhvcmFyaWE6JyxcbiAgICAgIFRUX1NFRU1PUkU6ICd2ZXIgbcOhcycsXG4gICAgICBUVF9BRERfQ0FMRU5EQVI6ICdBw7FhZGlyIGFsIGNhbGVuZGFyaW8nLFxuICAgICAgVFRfTk9USUZJQ0FUSU9OOiAnTm90aWZpY2FjaW9uZXMgZGUgQ2hyb21lL0FuZHJvaWQnLFxuICAgICAgVFRfSFRNTF9OT1RJRklDQVRJT046ICdOb3RpZmljYWNpb25lcyBkZSBIVE1MJyxcbiAgICAgIFRUX05PVElGX1RFU1Q6ICdUZXN0IENocm9tZS9BbmRyb2lkIE5vdGlmaWNhdGlvbicsXG4gICAgICBUVF9IVE1MX05PVElGX1RFU1Q6ICdUZXN0IEhUTUwgTm90aWZpY2F0aW9uJyxcbiAgICAgIFRUX05PVElGX01JTlVURVM6ICdNaW51dG9zIGFudGVzIGRlIGV2ZW50bycsXG4gICAgICBUVF9NSU5VVEVTOiAnTWludXRvcycsXG4gICAgICBUVF9OT1RJRl9TT1VORDogJ1JlcHJvZHVjaXIgc29uaWRvJyxcbiAgICAgIFRUX05PVElGX0VYQU1QTEU6ICdFamVtcGxvJyxcbiAgICAgIEJCX1RJVExFOiAnRnJpZW5kIEdhbWUnLFxuICAgICAgQkJfVElNRTogJ1RpZW1wbyBoYXN0YSBsYSBwcsOzeGltYSByb3RhY2nDs246JyxcbiAgICAgIEJCX0FMVDogJ01vc3RyYXIgbGFzIGhvcmFzJyxcbiAgICAgIEJCX0RBVEU6ICdGZWNoYScsXG4gICAgICBCQl9XT09ERU46ICdNYWRlcmEnLFxuICAgICAgQkJfU0lMVkVSOiAnUGxhdGEnLFxuICAgICAgQkJfR09MRDogJ09ybydcbiAgICB9KVxuICAgIC50cmFuc2xhdGlvbnMoJ2ZyJywge1xuICAgICAgTkFWX1RVUlRMRTogJ0hvcmFpcmVzIGRlcyBUb3J0dWVzJyxcbiAgICAgIE5BVl9CQVJSRUw6ICdQYXJ0aWUgZFxcJ2FtaXMnLFxuICAgICAgTkFWX0VWRU5UOiAnRXZlbnQnLFxuICAgICAgTkFWX0NPTlRBQ1Q6ICdNZSBDb250YWN0ZXInLFxuICAgICAgTkFWX1NFVFRJTkdTOiAnUsOpZ2xhZ2VzJyxcbiAgICAgIFRUX1RJVExFOiAnQ2FsY3VsYXRldXIgZGUgbFxcJ0hvcmFpcmUgZGVzIFRvcnR1ZXMnLFxuICAgICAgVFRfRElHSVQ6ICc2ZW1lIGNoaWZmcmUgSUQnLFxuICAgICAgVFRfRk9STUFUOiAnZm9ybWF0IGRlIGxcXCdoZXVyZScsXG4gICAgICBUVF9TVEFOREFSRDogJ25vcm1hbGUnLFxuICAgICAgVFRfTUlMSVRBUlk6ICcyNGgnLFxuICAgICAgVFRfVElNRVpPTkU6ICdGdXNlYXUgSG9yYWlyZTonLFxuICAgICAgVFRfU0VFTU9SRTogJ0xpcmUgbGEgc3VpdGUnLFxuICAgICAgVFRfQUREX0NBTEVOREFSOiAnQWpvdXRlciBhdSBDYWxlbmRyaWVyJyxcbiAgICAgIFRUX05PVElGSUNBVElPTjogJ05vdGlmaWNhdGlvbnMgR29vZ2xlL0FuZHJvaWQnLFxuICAgICAgVFRfSFRNTF9OT1RJRklDQVRJT046ICdOb3RpZmljYXRpb25zIEhUTUwnLFxuICAgICAgVFRfTk9USUZfVEVTVDogJ1Rlc3QgQ2hyb21lL0FuZHJvaWQgTm90aWZpY2F0aW9uJyxcbiAgICAgIFRUX0hUTUxfTk9USUZfVEVTVDogJ1Rlc3QgSFRNTCBOb3RpZmljYXRpb24nLFxuICAgICAgVFRfTk9USUZfTUlOVVRFUzogJ1RlbXBzIFJlc3RhbnQgYXZhbnQgRXZlbnQnLFxuICAgICAgVFRfTUlOVVRFUzogJ01pbnV0ZXMnLFxuICAgICAgVFRfTk9USUZfU09VTkQ6ICdKb3VlciBsZSBzb24nLFxuICAgICAgVFRfTk9USUZfRVhBTVBMRTogJ0V4ZW1wbGUnLFxuICAgICAgQkJfVElUTEU6ICfDiWNsYXRlbWVudCBkdSBUb25uZWF1JyxcbiAgICAgIEJCX1RJTUU6ICdUZW1wcyBqdXNxdVxcJ8OgIGxhIFByb2NoYWluZSBSb3RhdGlvbjonLFxuICAgICAgQkJfQUxUOiAnQWZmaWNoZXIgbGVzIEhldXJlcycsXG4gICAgICBCQl9EQVRFOiAnRGF0ZScsXG4gICAgICBCQl9XT09ERU46ICdCb2lzJyxcbiAgICAgIEJCX1NJTFZFUjogJ0FyZ2VudCcsXG4gICAgICBCQl9HT0xEOiAnT3InLFxuICAgIH0pO1xuICAgICR0cmFuc2xhdGVQcm92aWRlci5wcmVmZXJyZWRMYW5ndWFnZSgnZW4nKTtcbiAgICAkdHJhbnNsYXRlUHJvdmlkZXIudXNlU2FuaXRpemVWYWx1ZVN0cmF0ZWd5KCdlc2NhcGVkJyk7XG4gIH0pO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gIC5jb250cm9sbGVyKCdDb250YWN0Q3RybCcsIGNvbnRhY3RDdHJsKTtcblxuICBjb250YWN0Q3RybC4kaW5qZWN0ID0gWyckaHR0cCcsICdhcGlGYWN0b3J5JywgJ25hdmJhckZhY3RvcnknXTtcblxuICBmdW5jdGlvbiBjb250YWN0Q3RybCgkaHR0cCwgYXBpRmFjdG9yeSwgbmF2YmFyRmFjdG9yeSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgc2VuZGluZyA9IGZhbHNlO1xuXG4gICAgc2VsZi5zdWJqZWN0cyA9IFtcbiAgICAgICdJbmNvcnJlY3QgVHVydGxlIFRpbWUnLFxuICAgICAgJ1JlcG9ydCBhIGJ1ZycsXG4gICAgICAnT3RoZXInLFxuICAgIF07XG5cbiAgICBzZWxmLm1lc3NhZ2UgPSB7fTtcblxuICAgIG5hdmJhckZhY3Rvcnkuc2V0U2VvKCdDb250YWN0IE1lJywgJ0ZpbmQgYSBidWc/IEhhdmUgYSBxdWVzdGlvbiBvciBmZWVkYmFjaz8gQ29udGFjdCBtZSBhbmQgbGV0IG1lIGtub3cuJyk7XG5cblxuICAgIHNlbGYuaXNUdXJ0bGVCdWcgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChzZWxmLm1lc3NhZ2Uuc3ViamVjdCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gc2VsZi5tZXNzYWdlLnN1YmplY3QgPT09ICdJbmNvcnJlY3QgVHVydGxlIFRpbWUnO1xuICAgIH1cblxuICAgIHNlbGYuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChzZW5kaW5nKVxuICAgICAgICByZXR1cm47XG4gICAgICBcbiAgICAgIHNlbmRpbmcgPSB0cnVlO1xuICAgICAgc2VsZi5zdGF0dXMgPSAnU2VuZGluZy4uLic7XG4gICAgICAkaHR0cC5wb3N0KGFwaUZhY3RvcnkuZ2V0QmFzZVVybCgpICsgJy9jb250YWN0Jywgc2VsZi5tZXNzYWdlKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2VzcygpIHtcbiAgICAgICAgc2VsZi5zdGF0dXMgPSAnU2VudCEnO1xuICAgICAgICBzZW5kaW5nID0gZmFsc2U7XG4gICAgICB9KS5jYXRjaChmdW5jdGlvbiBlcnJvcigpIHtcbiAgICAgICAgc2VsZi5zdGF0dXMgPSAnRXJyb3Igc2VuZGluZy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nO1xuICAgICAgICBzZW5kaW5nID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgLmNvbnRyb2xsZXIoJ0V2ZW50c0N0cmwnLCBldmVudHNDdHJsKTtcblxuICBldmVudHNDdHJsLiRpbmplY3QgPSBbJyRtZE1lZGlhJywgJ3VzZXJGYWN0b3J5JywgJ2V2ZW50c0ZhY3RvcnknLCAnbmF2YmFyRmFjdG9yeSddO1xuICBcbiAgZnVuY3Rpb24gZXZlbnRzQ3RybCgkbWRNZWRpYSwgdXNlckZhY3RvcnksIGV2ZW50c0ZhY3RvcnksIG5hdmJhckZhY3RvcnkpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICBzZXRQYXJhbXMoKTtcblxuICAgIGZ1bmN0aW9uIHNldFBhcmFtcygpIHtcbiAgICAgIG5hdmJhckZhY3Rvcnkuc2V0U2VvKCdFdmVudHMnLCAnRXZlbnQgaW5mb3JtYXRpb24gYW5kIGFuZCB1cC10by1kYXRlIHRhYmxlIG9uIHN0b3J5IGlzbGUgYm9udXNlcy4nKVxuICAgICAgc2VsZi52ZXJzaW9uID0gdXNlckZhY3RvcnkuZ2V0VmVyc2lvbigpO1xuICAgICAgc2VsZi5ldmVudFRpbWVzID0gZXZlbnRzRmFjdG9yeS5nZXRFdmVudFRpbWVzKCk7XG4gICAgICBzZWxmLmZvcm1hdCA9IHVzZXJGYWN0b3J5LmdldERldGFpbGVkSG91clN0YXR1cygpO1xuICAgIH1cblxuICAgIHNlbGYudXBkYXRlVmVyc2lvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdXNlckZhY3Rvcnkuc2V0VmVyc2lvbihzZWxmLnZlcnNpb24pO1xuICAgICAgc2VsZi5ldmVudFRpbWVzID0gZXZlbnRzRmFjdG9yeS5nZXRFdmVudFRpbWVzKCk7XG4gICAgfVxuXG4gICAgc2VsZi5pc0xhcmdlU2NyZWVuID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJG1kTWVkaWEoJ2d0LW1kJyk7XG4gICAgfTtcblxuICAgIHNlbGYuc2hvd0hvdXJzID0gZnVuY3Rpb24oKSB7XG4gICAgICB1c2VyRmFjdG9yeS5zZXREZXRhaWxlZEhvdXJTdGF0dXMoc2VsZi5mb3JtYXQpO1xuICAgIH1cbiAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgIC5mYWN0b3J5KCdldmVudHNGYWN0b3J5JywgZXZlbnRzRmFjdG9yeSk7XG5cbiAgZXZlbnRzRmFjdG9yeS4kaW5qZWN0ID0gWyd1c2VyRmFjdG9yeSddO1xuXG4gIGZ1bmN0aW9uIGV2ZW50c0ZhY3RvcnkodXNlckZhY3RvcnkpIHtcbiAgICB2YXIgc2VydmljZXMgPSB7XG4gICAgICBnZXRFdmVudFRpbWVzOiBnZXRFdmVudFRpbWVzXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlcztcblxuICAgIGZ1bmN0aW9uIGdldEV2ZW50VGltZXMoKSB7XG4gICAgICB2YXIgdmVyc2lvbiA9IHVzZXJGYWN0b3J5LmdldFZlcnNpb24oKTtcbiAgICAgIHZhciBOVU1fREFZUyA9IDU7XG4gICAgICB2YXIgZHJvcFRhYmxlID0gWydMb2d1ZXRvd24sIEpheWEnLCAnQXJsb25nIFBhcmssIEFsdWJhcm5hJywgJ0JhcmF0aWUsIE5hbm9oYW5hIFJhaW5iYXNlJywgJ1N5cnVwIFZpbGxhZ2UsIERydW0gSXNsYW5kLCBXYXRlciA3JywgJ09yYW5nZSBUb3duLCBMaXR0bGUgR2FyZGVuLCBMb25nIFJpbmcgTG9uZyBMYW5kJywgJ1NoZWxsIFRvd24sIFdoaXNrZXkgUGVhaywgQXJrIE1heGltJywgJ0FsdmlkYVxcJ3MgSGlkZW91dCwgVHdpbiBDYXBlLCBBbmdlbCBJc2xhbmQnXTtcbiAgICAgIHZhciBzdGFtaW5hVGFibGUgPSBbJ09yYW5nZSBUb3duLCBEcnVtIElzbGFuZCwgV2F0ZXIgNycsICdTaGVsbCBUb3duLCBMaXR0bGUgR2FyZGVuLCBMb25nIFJpbmcgTG9uZyBMYW5kJywgJ0FsdmlkYVxcJ3MgSGlkZW91dCwgV2hpc2tleSBQZWFrLCBBcmsgTWF4aW0nLCAnRnVzY2hpYSBWaWxsYWdlLCBUd2luIENhcGUsIEFuZ2VsIElzbGFuZCcsICdMb2d1ZXRvd24sIEpheWEnLCAnQXJsb25nIFBhcmssIEFsdWJhcm5hJywgJ0JhcmF0aWUsIE5hbm9oYW5hIFJhaW5iYXNlJ107XG4gICAgICB2YXIgYmVsaVRhYmxlID0gWydCYXJhdGllLCBXaGlza2V5IFBlYWssIEFyayBNYXhpbScsICdTeXJ1cCBWaWxsYWdlLCBUd2luIENhcGUsIEFuZ2VsIElzbGFuZCcsICdMb2d1ZXRvd24sIEpheWEnLCAnQXJsb25nIFBhcmssIEFsdWJhcm5hJywgJ0JhcmF0aWUsIE5hbm9oYW5hIFJhaW5iYXNlJywgJ1N5cnVwIFZpbGxhZ2UsIERydW0gSXNsYW5kLCBXYXRlciA3JywgJ09yYW5nZSBUb3duLCBMaXR0bGUgR2FyZGVuLCBMb25nIFJpbmcgTG9uZyBMYW5kJ107XG5cbiAgICAgIGlmICh2ZXJzaW9uID09PSAnamFwYW4nKSB7XG4gICAgICAgIGRyb3BUYWJsZSA9IFsnTG9ndWV0b3duLCBKYXlhLCBUaHJpbGxlciBCYXJrIDEnLCAnQXJsb25nIFBhcmssIEFsdWJhcm5hLCBFbmllcyBMb2JieSAyJywgJ0JhcmF0aWUsIE5hbm9oYW5hIFJhaW5iYXNlLCBFbmllcyBMb2JieSAxJywgJ1N5cnVwIFZpbGxhZ2UsIERydW0gSXNsYW5kLCBXYXRlciA3JywgJ09yYW5nZSBUb3duLCBMaXR0bGUgR2FyZGVuLCBMb25nIFJpbmcgTG9uZyBMYW5kJywgJ1NoZWxsIFRvd24sIFdoaXNrZXkgUGVhaywgQXJrIE1heGltJywgJ0FsdmlkYVxcJ3MgSGlkZW91dCwgVHdpbiBDYXBlLCBBbmdlbCBJc2xhbmQnXTtcbiAgICAgICAgc3RhbWluYVRhYmxlID0gWydPcmFuZ2UgVG93biwgRHJ1bSBJc2xhbmQsIFdhdGVyIDcnLCAnU2hlbGwgVG93biwgTGl0dGxlIEdhcmRlbiwgTG9uZyBSaW5nIExvbmcgTGFuZCcsICdBbHZpZGFcXCdzIEhpZGVvdXQsIFdoaXNrZXkgUGVhaywgQXJrIE1heGltJywgJ0Z1c2NoaWEgVmlsbGFnZSwgVHdpbiBDYXBlLCBBbmdlbCBJc2xhbmQnLCAnTG9ndWV0b3duLCBKYXlhLCBUaHJpbGxlciBCYXJrIDEnLCAnQXJsb25nIFBhcmssIEFsdWJhcm5hLCBFbmllcyBMb2JieSAyJywgJ0JhcmF0aWUsIE5hbm9oYW5hIFJhaW5iYXNlLCBFbmllcyBMb2JieSAxJ107XG4gICAgICAgIGJlbGlUYWJsZSA9IFsnQmFyYXRpZSwgV2hpc2tleSBQZWFrLCBBcmsgTWF4aW0nLCAnU3lydXAgVmlsbGFnZSwgVHdpbiBDYXBlLCBBbmdlbCBJc2xhbmQsIFRocmlsbGVyIEJhcmsgMicsICdMb2d1ZXRvd24sIEpheWEsIFRocmlsbGVyIEJhcmsgMScsICdBcmxvbmcgUGFyaywgQWx1YmFybmEsIEVuaWVzIExvYmJ5IDInLCAnQmFyYXRpZSwgTmFub2hhbmEgUmFpbmJhc2UsIEVuaWVzIExvYmJ5IDEnLCAnU3lydXAgVmlsbGFnZSwgRHJ1bSBJc2xhbmQsIFdhdGVyIDcnLCAnT3JhbmdlIFRvd24sIExpdHRsZSBHYXJkZW4sIExvbmcgUmluZyBMb25nIExhbmQnXTtcbiAgICAgIH1cbiAgICAgIHZhciBzdGFydCA9IGdldFN0YXJ0VGltZSh2ZXJzaW9uKTtcbiAgICAgIHZhciBkYXlPZlllYXIgPSBzdGFydC5kYXlPZlllYXIoKTtcblxuICAgICAgdmFyIGV2ZW50VGltZXMgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOVU1fREFZUzsgaSsrKSB7XG4gICAgICAgIGV2ZW50VGltZXMucHVzaChnZXRUaW1lKGkpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGV2ZW50VGltZXM7XG5cbiAgICAgIGZ1bmN0aW9uIGdldFRpbWUoZGF5TnVtKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSBkYXlOdW0gKyBkYXlPZlllYXIgKyA0O1xuICAgICAgICBvZmZzZXQgPSBvZmZzZXQgJSA3O1xuXG4gICAgICAgIHZhciBkcm9wID0gZHJvcFRhYmxlW29mZnNldF0uc3BsaXQoJywnKTtcbiAgICAgICAgdmFyIHN0YW1pbmEgPSBzdGFtaW5hVGFibGVbb2Zmc2V0XS5zcGxpdCgnLCcpO1xuICAgICAgICB2YXIgYmVsaSA9IGJlbGlUYWJsZVtvZmZzZXRdLnNwbGl0KCcsJyk7XG4gICAgICAgIHZhciBzdGFydERhdGUgPSBzdGFydC5jbG9uZSgpLmFkZChkYXlOdW0sICdkYXlzJyk7XG5cbiAgICAgICAgdmFyIGhvdXJPZmZzZXQgPSAodmVyc2lvbiA9PT0gJ2dsb2JhbCcpID8gMjMgOiAxMTtcbiAgICAgICAgdmFyIGVuZCA9IHN0YXJ0RGF0ZS5jbG9uZSgpLmFkZChob3VyT2Zmc2V0LCAnaG91cnMnKS5hZGQoNTksICdtaW51dGVzJyk7XG4gICAgICAgIHZhciBkYXRlID0gc3RhcnREYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgICB2YXIgaG91clN0cmluZyA9IHN0YXJ0RGF0ZS5mb3JtYXQoJ0hIOm1tJykgKyAnLScgKyBlbmQuZm9ybWF0KCdISDptbScpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGF0ZTogZGF0ZSxcbiAgICAgICAgICBob3VyRGlzcGxheTogaG91clN0cmluZyxcbiAgICAgICAgICBkcm9wOiBkcm9wLFxuICAgICAgICAgIHN0YW1pbmE6IHN0YW1pbmEsXG4gICAgICAgICAgYmVsaTogYmVsaSxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFN0YXJ0VGltZSh2ZXJzaW9uKSB7XG4gICAgICB2YXIgaG91ck9mZnNldCA9ICh2ZXJzaW9uID09PSAnZ2xvYmFsJykgPyA4IDogMjtcbiAgICAgIHZhciBzdGFydCA9IG1vbWVudC51dGMoKS5zdGFydE9mKCdkYXknKS5hZGQoaG91ck9mZnNldCwgJ2hvdXJzJyk7XG4gICAgICB2YXIgbm93ID0gbW9tZW50KCk7XG5cbiAgICAgIGlmIChub3cuaXNBZnRlcihzdGFydCkpXG4gICAgICAgIHN0YXJ0LnN1YnRyYWN0KDEsICdkYXknKTtcblxuICAgICAgcmV0dXJuIHN0YXJ0O1xuICAgIH1cbiAgfVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gIC5mYWN0b3J5KCdhcGlGYWN0b3J5JywgYXBpRmFjdG9yeSk7XG5cbiAgYXBpRmFjdG9yeS4kaW5qZWN0ID0gW107XG5cbiAgZnVuY3Rpb24gYXBpRmFjdG9yeSgpIHtcbiAgICB2YXIgc2VydmljZXMgPSB7XG4gICAgICBnZXRCYXNlVXJsOiBnZXRCYXNlVXJsLFxuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZXM7XG5cbiAgICBmdW5jdGlvbiBnZXRCYXNlVXJsKCkge1xuICAgICAgaWYgKGRvY3VtZW50LmxvY2F0aW9uLmhvc3RuYW1lID09ICdsb2NhbGhvc3QnKVxuICAgICAgICByZXR1cm4gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCc7XG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiAnaHR0cHM6Ly9vcHRjdGltZXIuY29tJztcbiAgICB9XG4gIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgLmZhY3RvcnkoJ2NhbGVuZGFyRmFjdG9yeScsIGNhbGVuZGFyRmFjdG9yeSk7XG5cbiAgY2FsZW5kYXJGYWN0b3J5LiRpbmplY3QgPSBbJ3VzZXJGYWN0b3J5J107XG5cbiAgZnVuY3Rpb24gY2FsZW5kYXJGYWN0b3J5KHVzZXJGYWN0b3J5KSB7XG4gICAgdmFyIHNlcnZpY2VzID0ge1xuICAgICAgZ2V0Q2FsZW5kYXI6IGdldENhbGVuZGFyLFxuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZXM7XG5cbiAgICBmdW5jdGlvbiBnZXRDYWxlbmRhcigpIHtcbiAgICAgIHZhciBub3cgPSBtb21lbnQoKTtcblxuICAgICAgdmFyIHR1cnRsZVRpbWVzID0gdXNlckZhY3RvcnkuZ2V0VHVydGxlVGltZXMoKS5maWx0ZXIoZnVuY3Rpb24odHVydGxlVGltZSkge1xuICAgICAgICByZXR1cm4gbm93LmlzQmVmb3JlKHR1cnRsZVRpbWUpO1xuICAgICAgfSk7XG5cbiAgICAgIHZhciBjYWwgPSBpY3MoKTtcbiAgICAgIHZhciBzdWJqZWN0ID0gJ09QVEMgVHVydGxlIFRpbWUnO1xuICAgICAgdmFyIGRlc2NyaXB0aW9uID0gJ09uZSBQaWVjZSBUcmVhc3VyZSBDcnVpc2UgVHVydGxlIFRpbWUnO1xuICAgICAgdmFyIGxvY2F0aW9uID0gJ09QVEMnO1xuXG4gICAgICB2YXIgYmVnaW4sIGVuZDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgYmVnaW4gPSB0dXJ0bGVUaW1lc1tpXS5mb3JtYXQoKTtcbiAgICAgICAgZW5kID0gdHVydGxlVGltZXNbaV0uY2xvbmUoKS5hZGQoMzAsICdtaW51dGVzJykuZm9ybWF0KCk7XG4gICAgICAgIGNhbC5hZGRFdmVudChzdWJqZWN0LCBkZXNjcmlwdGlvbiwgbG9jYXRpb24sIGJlZ2luLCBlbmQpO1xuICAgICAgfVxuXG4gICAgICBjYWwuZG93bmxvYWQoJ3R1cnRsZV90aW1lcycsICcuaWNzJyk7XG4gICAgfVxuICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gIC5mYWN0b3J5KCdodG1sTm90aWZpY2F0aW9uRmFjdG9yeScsIGh0bWxOb3RpZmljYXRpb25GYWN0b3J5KTtcblxuICBodG1sTm90aWZpY2F0aW9uRmFjdG9yeS4kaW5qZWN0ID0gWyd1c2VyRmFjdG9yeSddO1xuXG4gIGZ1bmN0aW9uIGh0bWxOb3RpZmljYXRpb25GYWN0b3J5KHVzZXJGYWN0b3J5KSB7XG4gICAgdmFyIHNlcnZpY2VzID0ge1xuICAgICAgaXNFbmFibGVkOiBpc0VuYWJsZWQsXG4gICAgICBzZXROb3RpZmljYXRpb25zOiBzZXROb3RpZmljYXRpb25zLFxuICAgICAgcGxheUV4YW1wbGU6IHBsYXlFeGFtcGxlLFxuICAgIH07XG5cbiAgICB2YXIgbm90aWZpY2F0aW9ucyA9IFtdO1xuICAgIHZhciBzb3VuZCA9IG5ldyBBdWRpbygnc291bmRzL25vdGlmaWNhdGlvbi5tcDMnKTtcblxuICAgIHJldHVybiBzZXJ2aWNlcztcblxuICAgIGZ1bmN0aW9uIGlzRW5hYmxlZCgpIHtcbiAgICAgIHZhciBpT1MgPSAvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgIHZhciBtb2JpbGVBbmRUYWJsZXRDaGVjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2hlY2sgPSBmYWxzZTtcbiAgICAgICAgKGZ1bmN0aW9uKGEpe2lmKC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyBjZXx4ZGF8eGlpbm98YW5kcm9pZHxpcGFkfHBsYXlib29rfHNpbGsvaS50ZXN0KGEpfHwvMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1xcLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXxcXC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YndcXC0obnx1KXxjNTVcXC98Y2FwaXxjY3dhfGNkbVxcLXxjZWxsfGNodG18Y2xkY3xjbWRcXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcXC1zfGRldml8ZGljYXxkbW9ifGRvKGN8cClvfGRzKDEyfFxcLWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShcXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcXC01fGdcXC1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXFwtKG18cHx0KXxoZWlcXC18aGkocHR8dGEpfGhwKCBpfGlwKXxoc1xcLWN8aHQoYyhcXC18IHxffGF8Z3xwfHN8dCl8dHApfGh1KGF3fHRjKXxpXFwtKDIwfGdvfG1hKXxpMjMwfGlhYyggfFxcLXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djXFwtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcXC8oa3xsfHUpfDUwfDU0fFxcLVthLXddKXxsaWJ3fGx5bnh8bTFcXC13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bVxcLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KFxcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXFwtfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3xcXC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG5cXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcXC1nfHFhXFwtYXxxYygwN3wxMnwyMXwzMnw2MHxcXC1bMi03XXxpXFwtKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aFxcLXxvb3xwXFwtKXxzZGtcXC98c2UoYyhcXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXFwtfHNoYXJ8c2llKFxcLXxtKXxza1xcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFxcLXx2XFwtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsXFwtfHRkZ1xcLXx0ZWwoaXxtKXx0aW1cXC18dFxcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXFwtfG0zfG01KXx0eFxcLTl8dXAoXFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFxcLXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoXFwtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzXFwtfHlvdXJ8emV0b3x6dGVcXC0vaS50ZXN0KGEuc3Vic3RyKDAsNCkpKWNoZWNrID0gdHJ1ZX0pKG5hdmlnYXRvci51c2VyQWdlbnR8fG5hdmlnYXRvci52ZW5kb3J8fHdpbmRvdy5vcGVyYSk7XG4gICAgICAgIHJldHVybiBjaGVjaztcbiAgICAgIH07XG5cbiAgICAgIC8vIGlmIG5vdCBzdXBwb3J0ZWQsIHNob3cgbWVzYWdlXG4gICAgICBpZiAoIShcIk5vdGlmaWNhdGlvblwiIGluIHdpbmRvdykgfHwgbW9iaWxlQW5kVGFibGV0Q2hlY2soKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgZWxzZSB7XG4gICAgICAgIE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXROb3RpZmljYXRpb25zKCkge1xuICAgICAgdmFyIHR1cnRsZVRpbWVzID0gdXNlckZhY3RvcnkuZ2V0VHVydGxlVGltZXMoKTtcbiAgICAgIHZhciBzb3VuZEVuYWJsZWQgPSB1c2VyRmFjdG9yeS5nZXRIdG1sTm90aWZpY2F0aW9uU291bmRTdGF0dXMoKTtcblxuICAgICAgdmFyIG5vdyA9IG1vbWVudCgpO1xuICAgICAgdmFyIG1pbnV0ZXMgPSB1c2VyRmFjdG9yeS5nZXRUaW1lQmVmb3JlTm90aWZpY2F0aW9uKCk7XG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgYm9keTogbWludXRlcyArICcgbWludXRlcyB0aWxsIFR1cnRsZSBUaW1lIScsXG4gICAgICAgIGljb246ICdmYXZpY29uLmljbydcbiAgICAgIH07XG4gICAgICB2YXIgdGltZVVudGlsO1xuICAgICAgdmFyIGVuZCA9IG1vbWVudCgpLmFkZCgzLCdkYXlzJyk7XG5cbiAgICAgIGZvciAodmFyIGk9MDsgaTx0dXJ0bGVUaW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAobm93LmlzQWZ0ZXIodHVydGxlVGltZXNbaV0pIHx8IHR1cnRsZVRpbWVzW2ldLmlzQWZ0ZXIoZW5kKSlcbiAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICB0aW1lVW50aWwgPSB0dXJ0bGVUaW1lc1tpXS5mb3JtYXQoJ3gnKSAtIG5vdy5mb3JtYXQoJ3gnKTtcbiAgICAgICAgdGltZVVudGlsIC09IChtaW51dGVzICogMTAwMCk7XG4gICAgICAgIGlmICh0aW1lVW50aWwgPCAwIHx8IGlzTmFOKHRpbWVVbnRpbCkpXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIGlmIChub3RpZmljYXRpb25zW2ldICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KG5vdGlmaWNhdGlvbnNbaV0pO1xuXG4gICAgICAgIG5vdGlmaWNhdGlvbnNbaV0gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBOb3RpZmljYXRpb24oXCJPUFRDIFR1cnRsZSBUaW1lXCIsIG9wdGlvbnMpO1xuICAgICAgICAgIGlmIChzb3VuZEVuYWJsZWQpXG4gICAgICAgICAgICBzb3VuZC5wbGF5KCk7XG4gICAgICAgIH0sIHRpbWVVbnRpbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGxheUV4YW1wbGUoKSB7XG4gICAgICB2YXIgbWludXRlcyA9IHVzZXJGYWN0b3J5LmdldFRpbWVCZWZvcmVOb3RpZmljYXRpb24oKTtcbiAgICAgIHZhciBzb3VuZEVuYWJsZWQgPSB1c2VyRmFjdG9yeS5nZXRIdG1sTm90aWZpY2F0aW9uU291bmRTdGF0dXMoKTtcbiAgICAgIFxuICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIGJvZHk6IG1pbnV0ZXMgKyAnIG1pbnV0ZXMgdGlsbCBUdXJ0bGUgVGltZSEnLFxuICAgICAgICBpY29uOiAnLi4vaW1hZ2VzL2ZsYWcucG5nJ1xuICAgICAgfTtcblxuICAgICAgdmFyIGluc3RhbmNlID0gbmV3IE5vdGlmaWNhdGlvbihcIk9QVEMgVHVydGxlIFRpbWVcIiwgb3B0aW9ucyk7XG4gICAgICBpZiAoc291bmRFbmFibGVkKVxuICAgICAgICBzb3VuZC5wbGF5KCk7XG4gICAgfVxuICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gIC5mYWN0b3J5KCdub3RpZmljYXRpb25GYWN0b3J5Jywgbm90aWZpY2F0aW9uRmFjdG9yeSk7XG5cbiAgbm90aWZpY2F0aW9uRmFjdG9yeS4kaW5qZWN0ID0gWyckaHR0cCcsICd1c2VyRmFjdG9yeScsICdhcGlGYWN0b3J5J107XG5cbiAgZnVuY3Rpb24gbm90aWZpY2F0aW9uRmFjdG9yeSgkaHR0cCwgdXNlckZhY3RvcnksIGFwaUZhY3RvcnkpIHtcbiAgICB2YXIgc2VydmljZXMgPSB7XG4gICAgICBpc0VuYWJsZWQ6IGlzRW5hYmxlZCxcbiAgICAgIHN1YnNjcmliZTogc3Vic2NyaWJlLFxuICAgICAgdW5zdWJzY3JpYmU6IHVuc3Vic2NyaWJlLFxuICAgICAgcGxheUV4YW1wbGU6IHBsYXlFeGFtcGxlLFxuICAgIH07XG5cbiAgICB2YXIgcmVnO1xuICAgIHZhciBzdWI7XG5cblxuICAgIHJldHVybiBzZXJ2aWNlcztcblxuICAgIGZ1bmN0aW9uIGlzRW5hYmxlZCgpIHtcbiAgICAgIHJldHVybiAnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF0dGFjaFdvcmtlcigpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgaWYgKGlzRW5hYmxlZCgpKSB7XG4gICAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJ3NlcnZpY2Utd29ya2VyLmpzJykgIFxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5O1xuICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oc2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbikge1xuICAgICAgICAgICAgcmVnID0gc2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlIFdvcmtlciBpcyByZWFkeS4nKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlIFdvcmtlciBFcnJvci4nKTtcbiAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlamVjdCgnc2VydmljZSB3b3JrZXJzIG5vdCBzdXBwb3J0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3Vic2NyaWJlKGNiKSB7XG4gICAgICBpZiAoIWlzRW5hYmxlZCgpKVxuICAgICAgICByZXR1cm4gJ25vdGlmaWNhdGlvbnMgbm90IGVuYWJsZWQnO1xuXG4gICAgICBpZiAoIXJlZykge1xuICAgICAgICBhdHRhY2hXb3JrZXIoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGF1eCgpO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF1eCgpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBhdXgoKSB7XG4gICAgICAgIHJlZy5wdXNoTWFuYWdlci5nZXRTdWJzY3JpcHRpb24oKS50aGVuKGZ1bmN0aW9uKHB1c2hTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICBpZiAocHVzaFN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgc3ViID0gcHVzaFN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgIHNlbmRTdWJzY3JpcHRpb25Ub1NlcnZlcigpO1xuICAgICAgICAgICAgcmV0dXJuIGNiKG51bGwpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlZy5wdXNoTWFuYWdlci5zdWJzY3JpYmUoe3VzZXJWaXNpYmxlT25seTogdHJ1ZX0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocHVzaFN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgc3ViID0gcHVzaFN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlbmRwb2ludCA9Jywgc3ViLmVuZHBvaW50KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTdWJzY3JpYmVkLicpO1xuICAgICAgICAgICAgc2VuZFN1YnNjcmlwdGlvblRvU2VydmVyKCk7XG4gICAgICAgICAgICBjYihudWxsKTtcbiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVbmFibGUgdG8gc3Vic2NyaWJlLicpO1xuICAgICAgICAgICAgY2IoZXJyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdW5zdWJzY3JpYmUoY2IpIHtcbiAgICAgIGlmICghaXNFbmFibGVkKCkpXG4gICAgICAgIHJldHVybiAnbm90aWZpY2F0aW9ucyBub3QgZW5hYmxlZCc7XG4gICAgICBzdWIudW5zdWJzY3JpYmUoKS50aGVuKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVbnN1YnNjcmliZWQuJywgZXZlbnQpO1xuICAgICAgICBjYihudWxsKTtcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgdW5zdWJzY3JpYmluZy4nKTtcbiAgICAgICAgY2IoZXJyKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlbmRTdWJzY3JpcHRpb25Ub1NlcnZlcigpIHtcbiAgICAgIHZhciBlbmRwb2ludCA9IHN1Yi5lbmRwb2ludDtcblxuICAgICAgaWYgKGVuZHBvaW50Lm1hdGNoKC9eaHR0cHM6XFwvXFwvYW5kcm9pZFxcLmdvb2dsZWFwaXNcXC5jb21cXC9nY21cXC9zZW5kLykpIHtcbiAgICAgICAgdmFyIHJlZ2lzdHJhdGlvbklkID0gZW5kcG9pbnQubWF0Y2goLyg/Oi4qPylzZW5kXFwvKC4qKSQvKVsxXTtcbiAgICAgICAgZW5kcG9pbnQgPSAnaHR0cHM6Ly9hbmRyb2lkLmdvb2dsZWFwaXMuY29tL2djbS9zZW5kJztcbiAgICAgICAgdXNlckZhY3Rvcnkuc2V0UmVnaXN0cmF0aW9uSWQocmVnaXN0cmF0aW9uSWQpO1xuICAgICAgfVxuXG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBwbGF5RXhhbXBsZSgpIHtcbiAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICByZWdpc3RyYXRpb25JZHM6IFt1c2VyRmFjdG9yeS5nZXRSZWdpc3RyYXRpb25JZCgpXSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnNvbGUubG9nKCdkYXRhID0nLCBkYXRhKTtcblxuICAgICAgJGh0dHAucG9zdChhcGlGYWN0b3J5LmdldEJhc2VVcmwoKSArICcvYXBpL2djbScsIGRhdGEpXG4gICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnc2VudCB0byBzZXJ2ZXInKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24gZXJyb3IoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBwb3N0aW5nIHRvIHNlcnZlcicpO1xuICAgICAgfSk7XG4gICAgfVxufVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAuZmFjdG9yeSgndGltZUZhY3RvcnknLCB0aW1lRmFjdG9yeSk7XG5cbiAgdGltZUZhY3RvcnkuJGluamVjdCA9IFsnJGh0dHAnLCAndXNlckZhY3RvcnknLCAnYXBpRmFjdG9yeSddO1xuXG4gIGZ1bmN0aW9uIHRpbWVGYWN0b3J5KCRodHRwLCB1c2VyRmFjdG9yeSwgYXBpRmFjdG9yeSkge1xuICAgIHZhciBzZXJ2aWNlcyA9IHtcbiAgICAgIGdldFR1cnRsZVRpbWVzOiBnZXRUdXJ0bGVUaW1lcyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2VzO1xuXG4gICAgZnVuY3Rpb24gZ2V0VHVydGxlVGltZXMoY2IpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGRpZ2l0OiB1c2VyRmFjdG9yeS5nZXREaWdpdCgpLFxuICAgICAgICAgIHRpbWVGb3JtYXQ6IHVzZXJGYWN0b3J5LmdldFRpbWVGb3JtYXQoKSxcbiAgICAgICAgICB2ZXJzaW9uOiB1c2VyRmFjdG9yeS5nZXRWZXJzaW9uKCksXG4gICAgICAgICAgbnVtT2ZEYXlzOiAzLFxuICAgICAgICB9LFxuICAgICAgfVxuXG4gICAgICAkaHR0cC5nZXQoYXBpRmFjdG9yeS5nZXRCYXNlVXJsKCkgKyAnL2FwaS90dXJ0bGUnLCBwYXJhbXMpXG4gICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgIHVzZXJGYWN0b3J5LnNldFR1cnRsZVRpbWVzKHJlc3BvbnNlLmRhdGEubWFwKGZ1bmN0aW9uKHRpbWUpIHtcbiAgICAgICAgICByZXR1cm4gbW9tZW50LnV0Yyh0aW1lKTtcbiAgICAgICAgfSkpO1xuICAgICAgICB2YXIgdHVydGxlVGltZXMgPSBnZXRGb3JtYXR0ZWRUaW1lcyhyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgY2IobnVsbCwgdHVydGxlVGltZXMpO1xuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZXJyKSB7XG4gICAgICAgIGNiKGVycik7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRGb3JtYXR0ZWRUaW1lcyh0dXJ0bGVUaW1lcykge1xuICAgICAgdmFyIHRpbWVGb3JtYXQgPSB1c2VyRmFjdG9yeS5nZXRUaW1lRm9ybWF0KCk7XG5cbiAgICAgIHJldHVybiB0dXJ0bGVUaW1lcy5tYXAoZnVuY3Rpb24odGltZVN0cikge1xuICAgICAgICB2YXIgdGltZSwgZGF0ZTtcbiAgICAgICAgdmFyIHR1cnRsZVRpbWUgPSBtb21lbnQudXRjKHRpbWVTdHIpO1xuXG4gICAgICAgIGlmICh0aW1lRm9ybWF0ID09PSAnc3RhbmRhcmQnKVxuICAgICAgICAgIHRpbWUgPSB0dXJ0bGVUaW1lLmxvY2FsKCkuZm9ybWF0KCdoOm1tIGEnKTtcbiAgICAgICAgZWxzZSBpZiAodGltZUZvcm1hdCA9PT0gJ21pbGl0YXJ5JylcbiAgICAgICAgICB0aW1lID0gdHVydGxlVGltZS5sb2NhbCgpLmZvcm1hdCgnSEg6bW0nKTtcblxuICAgICAgICBkYXRlID0gdHVydGxlVGltZS5sb2NhbCgpLmZvcm1hdCgnTEwnKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRpbWU6IHRpbWUsXG4gICAgICAgICAgZGF0ZTogZGF0ZSxcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gIC5jb250cm9sbGVyKCdUdXJ0bGVDdHJsJywgdHVydGxlQ3RybCk7XG5cbiAgdHVydGxlQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAndXNlckZhY3RvcnknLCAndGltZUZhY3RvcnknLCAnbm90aWZpY2F0aW9uRmFjdG9yeScsICdodG1sTm90aWZpY2F0aW9uRmFjdG9yeScsICdjYWxlbmRhckZhY3RvcnknLCAnbmF2YmFyRmFjdG9yeSddO1xuICBcbiAgZnVuY3Rpb24gdHVydGxlQ3RybCgkc2NvcGUsIHVzZXJGYWN0b3J5LCB0aW1lRmFjdG9yeSwgbm90aWZpY2F0aW9uRmFjdG9yeSwgaHRtbE5vdGlmaWNhdGlvbkZhY3RvcnksIGNhbGVuZGFyRmFjdG9yeSwgbmF2YmFyRmFjdG9yeSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHNldFBhcmFtcygpO1xuXG4gICAgZnVuY3Rpb24gc2V0UGFyYW1zKCkge1xuICAgICAgbmF2YmFyRmFjdG9yeS5zZXRTZW8oJ1R1cnRsZSBUaW1lIENhbGN1bGF0b3InLCAnRGV0ZXJtaW5lIHlvdXIgdXBjb21pbmcgdHVydGxlIHRpbWUgb24gdGhpcyBhdXRvbWF0aWNhbGx5LXVwZGF0aW5nIGNhbGN1bGF0b3IgYW5kIGFuZCByZWNlaXZlIGEgcHVzaCBub3RpZmljYXRpb24gb24gQW5kcm9pZCBvciBkZXNrdG9wIGJyb3dzZXIuJyk7XG4gICAgICBzZWxmLnRpbWV6b25lID0gdXNlckZhY3RvcnkuZ2V0VGltZVpvbmUoKTtcbiAgICAgIHNlbGYuZGlnaXQgPSB1c2VyRmFjdG9yeS5nZXREaWdpdCgpO1xuICAgICAgc2VsZi52ZXJzaW9uID0gdXNlckZhY3RvcnkuZ2V0VmVyc2lvbigpO1xuICAgICAgc2VsZi50dXJ0bGVUaW1lcyA9IFtdO1xuICAgICAgc2VsZi5ub3RpZmljYXRpb25TdGF0dXMgPSB0cnVlO1xuICAgICAgc2VsZi5odG1sTm90aWZpY2F0aW9uU3RhdHVzID0gdXNlckZhY3RvcnkuZ2V0SHRtbE5vdGlmaWNhdGlvblN0YXR1cygpO1xuICAgICAgc2VsZi5ub3RpZmljYXRpb25FbmFibGVkID0gbm90aWZpY2F0aW9uRmFjdG9yeS5pc0VuYWJsZWQoKTtcbiAgICAgIHNlbGYuaHRtbE5vdGlmaWNhdGlvbkVuYWJsZWQgPSBodG1sTm90aWZpY2F0aW9uRmFjdG9yeS5pc0VuYWJsZWQoKTtcbiAgICAgIGdldFR1cnRsZVRpbWVzKCk7XG4gICAgICB0b2dnbGVOb3RpZmljYXRpb24oKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVOb3RpZmljYXRpb24oKSB7XG4gICAgICBpZiAoc2VsZi5ub3RpZmljYXRpb25TdGF0dXMpIHtcbiAgICAgICAgbm90aWZpY2F0aW9uRmFjdG9yeS5zdWJzY3JpYmUoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgc2VsZi5ub3RpZmljYXRpb25TdGF0dXMgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc29sZS5sb2coJ3N1YnNjcmliZWQnKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub3RpZmljYXRpb25GYWN0b3J5LnVuc3Vic2NyaWJlKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICBzZWxmLm5vdGlmaWNhdGlvblN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc29sZS5sb2coJ3Vuc3Vic2NyaWJlZCcpO1xuICAgICAgICB9KVxuICAgICAgfSAgICAgIFxuICAgIH1cblxuICAgIHNlbGYudG9nZ2xlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICB0b2dnbGVOb3RpZmljYXRpb24oKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRUdXJ0bGVUaW1lcygpIHtcbiAgICAgIHRpbWVGYWN0b3J5LmdldFR1cnRsZVRpbWVzKGZ1bmN0aW9uKGVyciwgdHVydGxlVGltZXMpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCd1bmFibGUgdG8gcmV0cmlldmUgdGltZXMnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLnR1cnRsZVRpbWVzID0gdHVydGxlVGltZXM7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBzZWxmLnVwZGF0ZURpZ2l0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB1c2VyRmFjdG9yeS5zZXREaWdpdChzZWxmLmRpZ2l0KTtcbiAgICAgIGdldFR1cnRsZVRpbWVzKCk7XG4gICAgfTtcblxuICAgIHNlbGYudXBkYXRlVmVyc2lvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdXNlckZhY3Rvcnkuc2V0VmVyc2lvbihzZWxmLnZlcnNpb24pO1xuICAgICAgZ2V0VHVydGxlVGltZXMoKTtcbiAgICB9O1xuXG4gICAgc2VsZi51cGRhdGVIdG1sTm90aWZpY2F0aW9uU3RhdHVzID0gZnVuY3Rpb24oKSB7XG4gICAgICB1c2VyRmFjdG9yeS5zZXRIdG1sTm90aWZpY2F0aW9uU3RhdHVzKHNlbGYuaHRtbE5vdGlmaWNhdGlvblN0YXR1cyk7XG4gICAgICBodG1sTm90aWZpY2F0aW9uRmFjdG9yeS5zZXROb3RpZmljYXRpb25zKCk7XG4gICAgfVxuXG4gICAgc2VsZi5wbGF5RXhhbXBsZU5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgbm90aWZpY2F0aW9uRmFjdG9yeS5wbGF5RXhhbXBsZSgpO1xuICAgIH1cblxuICAgIHNlbGYucGxheUV4YW1wbGVIdG1sTm90aWZpY2F0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICBodG1sTm90aWZpY2F0aW9uRmFjdG9yeS5wbGF5RXhhbXBsZSgpO1xuICAgIH1cblxuICAgIHNlbGYuZ2V0Q2FsZW5kYXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIGNhbGVuZGFyRmFjdG9yeS5nZXRDYWxlbmRhcigpO1xuICAgIH1cbiAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAuZmFjdG9yeSgndXNlckZhY3RvcnknLCB1c2VyRmFjdG9yeSk7XG5cbiAgdXNlckZhY3RvcnkuJGluamVjdCA9IFsnbG9jYWxTdG9yYWdlU2VydmljZScsICckaHR0cCcsICdhcGlGYWN0b3J5JywgJyR0cmFuc2xhdGUnXTtcblxuICBmdW5jdGlvbiB1c2VyRmFjdG9yeShsb2NhbFN0b3JhZ2VTZXJ2aWNlLCAkaHR0cCwgYXBpRmFjdG9yeSwgJHRyYW5zbGF0ZSkge1xuICAgIHZhciBzZXJ2aWNlcyA9IHtcbiAgICAgIGdldFRpbWVab25lOiBnZXRUaW1lWm9uZSxcbiAgICAgIGdldERpZ2l0OiBnZXREaWdpdCxcbiAgICAgIHNldERpZ2l0OiBzZXREaWdpdCxcbiAgICAgIGdldFRpbWVGb3JtYXQ6IGdldFRpbWVGb3JtYXQsXG4gICAgICBzZXRUaW1lRm9ybWF0OiBzZXRUaW1lRm9ybWF0LFxuICAgICAgZ2V0VmVyc2lvbjogZ2V0VmVyc2lvbixcbiAgICAgIHNldFZlcnNpb246IHNldFZlcnNpb24sXG4gICAgICBnZXRIdG1sTm90aWZpY2F0aW9uU3RhdHVzOiBnZXRIdG1sTm90aWZpY2F0aW9uU3RhdHVzLFxuICAgICAgc2V0SHRtbE5vdGlmaWNhdGlvblN0YXR1czogc2V0SHRtbE5vdGlmaWNhdGlvblN0YXR1cyxcbiAgICAgIGdldEh0bWxOb3RpZmljYXRpb25Tb3VuZFN0YXR1czogZ2V0SHRtbE5vdGlmaWNhdGlvblNvdW5kU3RhdHVzLFxuICAgICAgc2V0SHRtbE5vdGlmaWNhdGlvblNvdW5kU3RhdHVzOiBzZXRIdG1sTm90aWZpY2F0aW9uU291bmRTdGF0dXMsXG4gICAgICBnZXRUdXJ0bGVUaW1lczogZ2V0VHVydGxlVGltZXMsXG4gICAgICBzZXRUdXJ0bGVUaW1lczogc2V0VHVydGxlVGltZXMsXG4gICAgICBnZXRUaW1lQmVmb3JlTm90aWZpY2F0aW9uOiBnZXRUaW1lQmVmb3JlTm90aWZpY2F0aW9uLFxuICAgICAgc2V0VGltZUJlZm9yZU5vdGlmaWNhdGlvbjogc2V0VGltZUJlZm9yZU5vdGlmaWNhdGlvbixcbiAgICAgIGdldFJlZ2lzdHJhdGlvbklkOiBnZXRSZWdpc3RyYXRpb25JZCxcbiAgICAgIHNldFJlZ2lzdHJhdGlvbklkOiBzZXRSZWdpc3RyYXRpb25JZCxcbiAgICAgIGdldERldGFpbGVkSG91clN0YXR1czogZ2V0RGV0YWlsZWRIb3VyU3RhdHVzLFxuICAgICAgc2V0RGV0YWlsZWRIb3VyU3RhdHVzOiBzZXREZXRhaWxlZEhvdXJTdGF0dXMsXG4gICAgICBnZXRMb2NhbGU6IGdldExvY2FsZSxcbiAgICAgIHNldExvY2FsZTogc2V0TG9jYWxlLFxuICAgICAgZ2V0UGFzc3dvcmQ6IGdldFBhc3N3b3JkLFxuICAgICAgc2V0UGFzc3dvcmQ6IHNldFBhc3N3b3JkLFxuICAgIH07XG5cbiAgICB2YXIgZGlnaXQ7XG4gICAgdmFyIHRpbWVGb3JtYXQ7XG4gICAgdmFyIHZlcnNpb247XG4gICAgdmFyIGh0bWxOb3RpZmljYXRpb25TdGF0dXM7XG4gICAgdmFyIGh0bWxOb3RpZmljYXRpb25Tb3VuZFN0YXR1cztcbiAgICB2YXIgdHVydGxlVGltZXM7XG4gICAgdmFyIHRpbWVCZWZvcmVOb3RpZmljYXRpb247XG4gICAgdmFyIHJlZ2lzdHJhdGlvbklkO1xuICAgIHZhciBkZXRhaWxlZEhvdXJTdGF0dXM7XG4gICAgdmFyIGxvY2FsZTtcbiAgICB2YXIgcGFzc3dvcmQ7XG4gICAgbG9hZEZyb21TdG9yYWdlKCk7XG5cbiAgICByZXR1cm4gc2VydmljZXM7XG5cbiAgICBmdW5jdGlvbiBsb2FkRnJvbVN0b3JhZ2UoKSB7XG4gICAgICBkaWdpdCA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KCdkaWdpdCcpIHx8IDA7XG4gICAgICB0aW1lRm9ybWF0ID0gbG9jYWxTdG9yYWdlU2VydmljZS5nZXQoJ3RpbWVGb3JtYXQnKSB8fCAnc3RhbmRhcmQnO1xuICAgICAgdmVyc2lvbiA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KCd2ZXJzaW9uJykgfHwgJ2dsb2JhbCc7XG4gICAgICBodG1sTm90aWZpY2F0aW9uU3RhdHVzID0gbG9jYWxTdG9yYWdlU2VydmljZS5nZXQoJ2h0bWxOb3RpZmljYXRpb25TdGF0dXMnKSB8fCBmYWxzZTtcbiAgICAgIGh0bWxOb3RpZmljYXRpb25Tb3VuZFN0YXR1cyA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KCdodG1sTm90aWZpY2F0aW9uU291bmRTdGF0dXMnKSB8fCBmYWxzZTtcbiAgICAgIHRpbWVCZWZvcmVOb3RpZmljYXRpb24gPSBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldCgndGltZUJlZm9yZU5vdGlmaWNhdGlvbicpIHx8IDEwO1xuICAgICAgZGV0YWlsZWRIb3VyU3RhdHVzID0gbG9jYWxTdG9yYWdlU2VydmljZS5nZXQoJ2RldGFpbGVkSG91clN0YXR1cycpIHx8IGZhbHNlO1xuICAgICAgbG9jYWxlID0gbG9jYWxTdG9yYWdlU2VydmljZS5nZXQoJ2xvY2FsZScpIHx8ICdlbic7XG4gICAgICAkdHJhbnNsYXRlLnVzZShsb2NhbGUpO1xuICAgICAgbW9tZW50LmxvY2FsZShsb2NhbGUpO1xuICAgICAgcGFzc3dvcmQgPSBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldCgncGFzc3dvcmQnKSB8fCAnJztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwb3N0VXNlckRhdGEoKSB7XG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgZGlnaXQ6IGRpZ2l0JTUsXG4gICAgICAgIHJlZ2lzdHJhdGlvbklkOiByZWdpc3RyYXRpb25JZCxcbiAgICAgICAgdGltZUJlZm9yZTogdGltZUJlZm9yZU5vdGlmaWNhdGlvbixcbiAgICAgIH07XG5cbiAgICAgICRodHRwLnBvc3QoYXBpRmFjdG9yeS5nZXRCYXNlVXJsKCkgKyAnL2FwaS91c2VycycsIGRhdGEpXG4gICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzKCkge1xuICAgICAgICBjb25zb2xlLmxvZygncG9zdGVkIHN1YnNjcmlwdGlvbiB0byBzZXJ2ZXInKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24gZXJyb3IoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBwb3N0aW5nIHN1YnNjcmlwdGlvbiB0byBzZXJ2ZXInKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFRpbWVab25lKCkge1xuICAgICAgcmV0dXJuIGpzdHouZGV0ZXJtaW5lKCkubmFtZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldERpZ2l0KCkge1xuICAgICAgcmV0dXJuIGRpZ2l0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldERpZ2l0KGQpIHtcbiAgICAgIGRpZ2l0ID0gZCAlIDU7XG4gICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnZGlnaXQnLCBkKTtcbiAgICAgIHBvc3RVc2VyRGF0YSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFRpbWVGb3JtYXQoKSB7XG4gICAgICByZXR1cm4gdGltZUZvcm1hdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRUaW1lRm9ybWF0KHRmKSB7XG4gICAgICB0aW1lRm9ybWF0ID0gdGY7XG4gICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgndGltZUZvcm1hdCcsIHRmKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRWZXJzaW9uKCkge1xuICAgICAgcmV0dXJuIHZlcnNpb247XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0VmVyc2lvbih2KSB7XG4gICAgICB2ZXJzaW9uID0gdjtcbiAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KCd2ZXJzaW9uJywgdik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0SHRtbE5vdGlmaWNhdGlvblN0YXR1cygpIHtcbiAgICAgIHJldHVybiBodG1sTm90aWZpY2F0aW9uU3RhdHVzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldEh0bWxOb3RpZmljYXRpb25TdGF0dXMoaCkge1xuICAgICAgaHRtbE5vdGlmaWNhdGlvblN0YXR1cyA9IGg7XG4gICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnaHRtbE5vdGlmaWNhdGlvblN0YXR1cycsIGgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFR1cnRsZVRpbWVzKCkge1xuICAgICAgcmV0dXJuIHR1cnRsZVRpbWVzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFR1cnRsZVRpbWVzKHR0KSB7XG4gICAgICB0dXJ0bGVUaW1lcyA9IHR0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEh0bWxOb3RpZmljYXRpb25Tb3VuZFN0YXR1cygpIHtcbiAgICAgIHJldHVybiBodG1sTm90aWZpY2F0aW9uU291bmRTdGF0dXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0SHRtbE5vdGlmaWNhdGlvblNvdW5kU3RhdHVzKHMpIHtcbiAgICAgIGh0bWxOb3RpZmljYXRpb25Tb3VuZFN0YXR1cyA9IHM7XG4gICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnaHRtbE5vdGlmaWNhdGlvblNvdW5kU3RhdHVzJywgcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VGltZUJlZm9yZU5vdGlmaWNhdGlvbigpIHtcbiAgICAgIHJldHVybiB0aW1lQmVmb3JlTm90aWZpY2F0aW9uO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFRpbWVCZWZvcmVOb3RpZmljYXRpb24odCkge1xuICAgICAgdGltZUJlZm9yZU5vdGlmaWNhdGlvbiA9IHQ7XG4gICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgndGltZUJlZm9yZU5vdGlmaWNhdGlvbicsIHQpO1xuICAgICAgcG9zdFVzZXJEYXRhKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UmVnaXN0cmF0aW9uSWQoKSB7XG4gICAgICByZXR1cm4gcmVnaXN0cmF0aW9uSWQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0UmVnaXN0cmF0aW9uSWQocikge1xuICAgICAgcmVnaXN0cmF0aW9uSWQgPSByO1xuICAgICAgcG9zdFVzZXJEYXRhKCk7IFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldERldGFpbGVkSG91clN0YXR1cygpIHtcbiAgICAgIHJldHVybiBkZXRhaWxlZEhvdXJTdGF0dXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0RGV0YWlsZWRIb3VyU3RhdHVzKGQpIHtcbiAgICAgIGRldGFpbGVkSG91clN0YXR1cyA9IGQ7XG4gICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnZGV0YWlsZWRIb3VyU3RhdHVzJywgZCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0TG9jYWxlKCkge1xuICAgICAgcmV0dXJuIGxvY2FsZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRMb2NhbGUobCkge1xuICAgICAgbG9jYWxlID0gbDtcbiAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KCdsb2NhbGUnLCBsKTtcbiAgICAgICR0cmFuc2xhdGUudXNlKGwpO1xuICAgICAgbW9tZW50LmxvY2FsZShsb2NhbGUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFBhc3N3b3JkKCkge1xuICAgICAgcmV0dXJuIHBhc3N3b3JkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFBhc3N3b3JkKHApIHtcbiAgICAgIHBhc3N3b3JkID0gcDtcbiAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KCdwYXNzd29yZCcsIHApO1xuICAgIH1cbiAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAuY29udHJvbGxlcignTmF2YmFyQ3RybCcsIG5hdmJhckN0cmwpO1xuXG4gIG5hdmJhckN0cmwuJGluamVjdCA9IFsnJHN0YXRlJywgJyRtZFNpZGVuYXYnLCAnJHRyYW5zbGF0ZScsICckc2NvcGUnLCAndXNlckZhY3RvcnknLCAnbmF2YmFyRmFjdG9yeSddO1xuXG4gIGZ1bmN0aW9uIG5hdmJhckN0cmwoJHN0YXRlLCAkbWRTaWRlbmF2LCAkdHJhbnNsYXRlLCAkc2NvcGUsIHVzZXJGYWN0b3J5LCBuYXZiYXJGYWN0b3J5KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYuc2VvID0gbmF2YmFyRmFjdG9yeS5nZXRTZW8oKTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIHNlbGYubWVudSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGxpbms6ICd0dXJ0bGUnLFxuICAgICAgICAgIHRpdGxlOiAkdHJhbnNsYXRlLmluc3RhbnQoJ05BVl9UVVJUTEUnKSxcbiAgICAgICAgICBpY29uOiAnZmEtaG9tZSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGxpbms6ICdiYXJyZWwnLFxuICAgICAgICAgIHRpdGxlOiAkdHJhbnNsYXRlLmluc3RhbnQoJ05BVl9CQVJSRUwnKSxcbiAgICAgICAgICBpY29uOiAnZmEtdXNlcnMnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBsaW5rOiAnZXZlbnRzJyxcbiAgICAgICAgICB0aXRsZTogJHRyYW5zbGF0ZS5pbnN0YW50KCdOQVZfRVZFTlQnKSxcbiAgICAgICAgICBpY29uOiAnZmEtY2FsZW5kYXItbydcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGxpbms6ICdjb250YWN0JyxcbiAgICAgICAgICB0aXRsZTogJHRyYW5zbGF0ZS5pbnN0YW50KCdOQVZfQ09OVEFDVCcpLFxuICAgICAgICAgIGljb246ICdmYS1lbnZlbG9wZSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGxpbms6ICdzZXR0aW5ncycsXG4gICAgICAgICAgdGl0bGU6ICR0cmFuc2xhdGUuaW5zdGFudCgnTkFWX1NFVFRJTkdTJyksXG4gICAgICAgICAgaWNvbjogJ2ZhLWNvZ3MnXG4gICAgICAgIH1cbiAgICAgIF07XG4gICAgfVxuXG4gICAgc2VsZi5pc1NlbGVjdGVkID0gZnVuY3Rpb24odGl0bGUpIHtcbiAgICAgIGlmICghJHN0YXRlLmN1cnJlbnQuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICBzZWxmLnRpdGxlID0gJHRyYW5zbGF0ZS5pbnN0YW50KCRzdGF0ZS5jdXJyZW50LmRhdGEudGl0bGUpO1xuICAgICAgcmV0dXJuICh0aXRsZSA9PT0gc2VsZi50aXRsZSk7XG4gICAgfTtcblxuICAgIHNlbGYudG9nZ2xlU2lkZW5hdiA9IGZ1bmN0aW9uKCkge1xuICAgICAgJG1kU2lkZW5hdignbGVmdCcpLnRvZ2dsZSgpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHVzZXJGYWN0b3J5LmdldExvY2FsZSgpO1xuICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgYWN0aXZhdGUoKTtcbiAgICB9KTtcblxuICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gIC5mYWN0b3J5KCduYXZiYXJGYWN0b3J5JywgbmF2YmFyRmFjdG9yeSk7XG5cbiAgbmF2YmFyRmFjdG9yeS4kaW5qZWN0ID0gW107XG5cbiAgZnVuY3Rpb24gbmF2YmFyRmFjdG9yeSgpIHtcbiAgICB2YXIgc2VydmljZXMgPSB7XG4gICAgICBnZXRTZW86IGdldFNlbyxcbiAgICAgIHNldFNlbzogc2V0U2VvLFxuICAgIH07XG5cbiAgICB2YXIgc2VvID0ge1xuICAgICAgcGFnZVRpdGxlOiAnSG9tZScsXG4gICAgICBkZXNjcmlwdGlvbjogJ1N1cHBsZW1lbnQgYXBwIGZvciBPbmUgUGllY2UgVHJlYXN1cmUgQ3J1aXNlIHRvIGhlbHAgY2FsY3VsYXRlIHlvdXIgdHVydGxlIHRpbWVzIGFuZCBzZXQgbm90aWZpY2F0aW9ucy4nLFxuICAgIH07XG5cblxuICAgIHJldHVybiBzZXJ2aWNlcztcblxuICAgIGZ1bmN0aW9uIGdldFNlbygpIHtcbiAgICAgIHJldHVybiBzZW87XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0U2VvKHRpdGxlLCBkZXNjcmlwdGlvbikge1xuICAgICAgc2VvLnBhZ2VUaXRsZSA9IHRpdGxlO1xuICAgICAgc2VvLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG5cbiAgICAgIHJldHVybiBzZW87XG4gICAgfVxuICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gIC5jb250cm9sbGVyKCdTZXR0aW5nc0N0cmwnLCBzZXR0aW5nc0N0cmwpO1xuXG4gIHNldHRpbmdzQ3RybC4kaW5qZWN0ID0gWyd1c2VyRmFjdG9yeScsICduYXZiYXJGYWN0b3J5J107XG5cbiAgZnVuY3Rpb24gc2V0dGluZ3NDdHJsKHVzZXJGYWN0b3J5LCBuYXZiYXJGYWN0b3J5KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgc2VsZi5sYW5ndWFnZXMgPSBbXG4gICAgICB7XG4gICAgICAgIGxhbmd1YWdlOiAnRW5nbGlzaCcsXG4gICAgICAgIGFiYnJldjogJ2VuJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGxhbmd1YWdlOiAnRGV1dHNjaCcsXG4gICAgICAgIGFiYnJldjogJ2RlJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGxhbmd1YWdlOiAnRXNwYcOxb2wnLFxuICAgICAgICBhYmJyZXY6ICdlcycsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBsYW5ndWFnZTogJ2ZyYW7Dp2FpcycsXG4gICAgICAgIGFiYnJldjogJ2ZyJyxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIG5hdmJhckZhY3Rvcnkuc2V0U2VvKCdTZXR0aW5ncycsICdBZGp1c3QgeW91ciBsYW5ndWFnZSBhbmQgY3VzdG9taXplIHlvdXIgbm90aWZpY2F0aW9uIHNldHRpbmdzLicpO1xuICAgIHNlbGYudGltZUZvcm1hdCA9IHVzZXJGYWN0b3J5LmdldFRpbWVGb3JtYXQoKTtcbiAgICBzZWxmLmh0bWxOb3RpZmljYXRpb25Tb3VuZFN0YXR1cyA9IHVzZXJGYWN0b3J5LmdldEh0bWxOb3RpZmljYXRpb25Tb3VuZFN0YXR1cygpO1xuICAgIHNlbGYudGltZUJlZm9yZU5vdGlmaWNhdGlvbiA9IHVzZXJGYWN0b3J5LmdldFRpbWVCZWZvcmVOb3RpZmljYXRpb24oKTtcbiAgICBzZWxmLmxvY2FsZSA9IHVzZXJGYWN0b3J5LmdldExvY2FsZSgpO1xuXG4gICAgc2VsZi5zZXRUaW1lRm9ybWF0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB1c2VyRmFjdG9yeS5zZXRUaW1lRm9ybWF0KHNlbGYudGltZUZvcm1hdCk7XG4gICAgfTtcblxuICAgIHNlbGYuc2V0SHRtbE5vdGlmaWNhdGlvblNvdW5kU3RhdHVzID0gZnVuY3Rpb24oKSB7XG4gICAgICB1c2VyRmFjdG9yeS5zZXRIdG1sTm90aWZpY2F0aW9uU291bmRTdGF0dXMoc2VsZi5odG1sTm90aWZpY2F0aW9uU291bmRTdGF0dXMpO1xuICAgIH1cblxuICAgIHNlbGYudXBkYXRlVGltZUJlZmVyZU5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdXNlckZhY3Rvcnkuc2V0VGltZUJlZm9yZU5vdGlmaWNhdGlvbihzZWxmLnRpbWVCZWZvcmVOb3RpZmljYXRpb24pO1xuICAgIH1cblxuICAgIHNlbGYudXBkYXRlTG9jYWxlID0gZnVuY3Rpb24oKSB7XG4gICAgICB1c2VyRmFjdG9yeS5zZXRMb2NhbGUoc2VsZi5sb2NhbGUpO1xuICAgIH1cblxuICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgLmNvbmZpZyhjb25maWcpO1xuXG4gIGNvbmZpZy4kaW5qZWN0ID0gWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInXTtcblxuICBmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvdHVydGxlJyk7XG5cbiAgICAkc3RhdGVQcm92aWRlclxuICAgICAgLnN0YXRlKCd0dXJ0bGUnLCB7XG4gICAgICAgIHVybDogJy90dXJ0bGUnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3R1cnRsZS90dXJ0bGUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdUdXJ0bGVDdHJsJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndHVydGxlJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHRpdGxlOiAnTkFWX1RVUlRMRSdcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnYmFycmVsJywge1xuICAgICAgICB1cmw6ICcvYmFycmVsJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdiYXJyZWwvYmFycmVsLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnQmFycmVsQ3RybCcsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ2JhcnJlbCcsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0aXRsZTogJ05BVl9CQVJSRUwnXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ2V2ZW50cycsIHtcbiAgICAgICAgdXJsOiAnL2V2ZW50cycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnZXZlbnRzL2V2ZW50cy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0V2ZW50c0N0cmwnLFxuICAgICAgICBjb250cm9sbGVyQXM6ICdldmVudHMnLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdGl0bGU6ICdOQVZfRVZFTlQnXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ2NvbnRhY3QnLCB7XG4gICAgICAgIHVybDogJy9jb250YWN0JyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb250YWN0L2NvbnRhY3QuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdDb250YWN0Q3RybCcsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ2NvbnRhY3QnLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdGl0bGU6ICdOQVZfQ09OVEFDVCdcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnc2V0dGluZ3MnLCB7XG4gICAgICAgIHVybDogJy9zZXR0aW5ncycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnc2V0dGluZ3Mvc2V0dGluZ3MuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdTZXR0aW5nc0N0cmwnLFxuICAgICAgICBjb250cm9sbGVyQXM6ICdzZXR0aW5ncycsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0aXRsZTogJ05BVl9TRVRUSU5HUydcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnYWRtaW4nLCB7XG4gICAgICAgIHVybDogJy9hZG1pbicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYWRtaW4vYWRtaW4uaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBZG1pbkN0cmwnLFxuICAgICAgICBjb250cm9sbGVyQXM6ICdhZG1pbicsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0aXRsZTogJ0FkbWluJ1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaGFzaFByZWZpeCgnIScpO1xuICB9XG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
